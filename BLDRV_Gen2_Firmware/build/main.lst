ARM GAS  /var/folders/l2/71_2bdwd5hl5fnnvwg2sr4v80000gn/T//ccUkH8w1.s 			page 1


   1              		.cpu cortex-m4
   2              		.arch armv7e-m
   3              		.fpu fpv4-sp-d16
   4              		.eabi_attribute 27, 1
   5              		.eabi_attribute 28, 1
   6              		.eabi_attribute 20, 1
   7              		.eabi_attribute 21, 1
   8              		.eabi_attribute 23, 3
   9              		.eabi_attribute 24, 1
  10              		.eabi_attribute 25, 1
  11              		.eabi_attribute 26, 1
  12              		.eabi_attribute 30, 1
  13              		.eabi_attribute 34, 1
  14              		.eabi_attribute 18, 4
  15              		.file	"main.c"
  16              		.text
  17              	.Ltext0:
  18              		.cfi_sections	.debug_frame
  19              		.file 1 "Core/Src/main.c"
  20              		.section	.text.spiCalcEvenParity,"ax",%progbits
  21              		.align	1
  22              		.global	spiCalcEvenParity
  23              		.syntax unified
  24              		.thumb
  25              		.thumb_func
  27              	spiCalcEvenParity:
  28              	.LVL0:
  29              	.LFB126:
   1:Core/Src/main.c **** /* USER CODE BEGIN Header */
   2:Core/Src/main.c **** /**
   3:Core/Src/main.c ****  ******************************************************************************
   4:Core/Src/main.c ****  * @file           : main.c
   5:Core/Src/main.c ****  * @brief          : Main program body
   6:Core/Src/main.c ****  ******************************************************************************
   7:Core/Src/main.c ****  * @attention
   8:Core/Src/main.c ****  *
   9:Core/Src/main.c ****  * Copyright (c) 2024 STMicroelectronics.
  10:Core/Src/main.c ****  * All rights reserved.
  11:Core/Src/main.c ****  *
  12:Core/Src/main.c ****  * This software is licensed under terms that can be found in the LICENSE file
  13:Core/Src/main.c ****  * in the root directory of this software component.
  14:Core/Src/main.c ****  * If no LICENSE file comes with this software, it is provided AS-IS.
  15:Core/Src/main.c ****  *
  16:Core/Src/main.c ****  ******************************************************************************
  17:Core/Src/main.c ****  */
  18:Core/Src/main.c **** /* USER CODE END Header */
  19:Core/Src/main.c **** /* Includes ------------------------------------------------------------------*/
  20:Core/Src/main.c **** #include "main.h"
  21:Core/Src/main.c **** #include "adc.h"
  22:Core/Src/main.c **** #include "dma.h"
  23:Core/Src/main.c **** #include "spi.h"
  24:Core/Src/main.c **** #include "tim.h"
  25:Core/Src/main.c **** #include "usart.h"
  26:Core/Src/main.c **** #include "gpio.h"
  27:Core/Src/main.c **** 
  28:Core/Src/main.c **** /* Private includes ----------------------------------------------------------*/
  29:Core/Src/main.c **** /* USER CODE BEGIN Includes */
ARM GAS  /var/folders/l2/71_2bdwd5hl5fnnvwg2sr4v80000gn/T//ccUkH8w1.s 			page 2


  30:Core/Src/main.c **** #include <math.h>
  31:Core/Src/main.c **** #include <stdio.h>
  32:Core/Src/main.c **** 
  33:Core/Src/main.c **** #include "dma_printf.h"
  34:Core/Src/main.c **** /* USER CODE END Includes */
  35:Core/Src/main.c **** 
  36:Core/Src/main.c **** /* Private typedef -----------------------------------------------------------*/
  37:Core/Src/main.c **** /* USER CODE BEGIN PTD */
  38:Core/Src/main.c **** 
  39:Core/Src/main.c **** /* USER CODE END PTD */
  40:Core/Src/main.c **** 
  41:Core/Src/main.c **** /* Private define ------------------------------------------------------------*/
  42:Core/Src/main.c **** /* USER CODE BEGIN PD */
  43:Core/Src/main.c **** #define radians(x) ((x) * 3.14159265358979323846 / 180.0)
  44:Core/Src/main.c **** 
  45:Core/Src/main.c **** #define CS_LOW() HAL_GPIO_WritePin(GPIOA, GPIO_PIN_4, GPIO_PIN_RESET)
  46:Core/Src/main.c **** #define CS_HIGH() HAL_GPIO_WritePin(GPIOA, GPIO_PIN_4, GPIO_PIN_SET)
  47:Core/Src/main.c **** /* USER CODE END PD */
  48:Core/Src/main.c **** 
  49:Core/Src/main.c **** /* Private macro -------------------------------------------------------------*/
  50:Core/Src/main.c **** /* USER CODE BEGIN PM */
  51:Core/Src/main.c **** 
  52:Core/Src/main.c **** /* USER CODE END PM */
  53:Core/Src/main.c **** 
  54:Core/Src/main.c **** /* Private variables ---------------------------------------------------------*/
  55:Core/Src/main.c **** 
  56:Core/Src/main.c **** /* USER CODE BEGIN PV */
  57:Core/Src/main.c **** 
  58:Core/Src/main.c **** /* USER CODE END PV */
  59:Core/Src/main.c **** 
  60:Core/Src/main.c **** /* Private function prototypes -----------------------------------------------*/
  61:Core/Src/main.c **** void SystemClock_Config(void);
  62:Core/Src/main.c **** /* USER CODE BEGIN PFP */
  63:Core/Src/main.c **** 
  64:Core/Src/main.c **** /* USER CODE END PFP */
  65:Core/Src/main.c **** 
  66:Core/Src/main.c **** /* Private user code ---------------------------------------------------------*/
  67:Core/Src/main.c **** /* USER CODE BEGIN 0 */
  68:Core/Src/main.c **** #define AS5048A_ANGLE 0x3FFF
  69:Core/Src/main.c **** 
  70:Core/Src/main.c **** uint8_t spiCalcEvenParity(uint16_t value) {
  30              		.loc 1 70 43 view -0
  31              		.cfi_startproc
  32              		@ args = 0, pretend = 0, frame = 0
  33              		@ frame_needed = 0, uses_anonymous_args = 0
  34              		@ link register save eliminated.
  35              		.loc 1 70 43 is_stmt 0 view .LVU1
  36 0000 0246     		mov	r2, r0
  71:Core/Src/main.c ****     uint8_t cnt = 0;
  37              		.loc 1 71 5 is_stmt 1 view .LVU2
  38              	.LVL1:
  72:Core/Src/main.c ****     for (uint8_t i = 0; i < 16; i++) {
  39              		.loc 1 72 5 view .LVU3
  40              	.LBB4:
  41              		.loc 1 72 10 view .LVU4
  42              		.loc 1 72 18 is_stmt 0 view .LVU5
  43 0002 0023     		movs	r3, #0
ARM GAS  /var/folders/l2/71_2bdwd5hl5fnnvwg2sr4v80000gn/T//ccUkH8w1.s 			page 3


  44              	.LBE4:
  71:Core/Src/main.c ****     uint8_t cnt = 0;
  45              		.loc 1 71 13 view .LVU6
  46 0004 1846     		mov	r0, r3
  47              	.LVL2:
  48              	.LBB5:
  49              		.loc 1 72 5 view .LVU7
  50 0006 02E0     		b	.L2
  51              	.LVL3:
  52              	.L3:
  73:Core/Src/main.c ****         if (value & 0x1) {
  74:Core/Src/main.c ****             cnt++;
  75:Core/Src/main.c ****         }
  76:Core/Src/main.c ****         value >>= 1;
  53              		.loc 1 76 9 is_stmt 1 discriminator 2 view .LVU8
  54              		.loc 1 76 15 is_stmt 0 discriminator 2 view .LVU9
  55 0008 5208     		lsrs	r2, r2, #1
  56              	.LVL4:
  72:Core/Src/main.c ****     for (uint8_t i = 0; i < 16; i++) {
  57              		.loc 1 72 34 is_stmt 1 discriminator 2 view .LVU10
  58 000a 0133     		adds	r3, r3, #1
  59              	.LVL5:
  72:Core/Src/main.c ****     for (uint8_t i = 0; i < 16; i++) {
  60              		.loc 1 72 34 is_stmt 0 discriminator 2 view .LVU11
  61 000c DBB2     		uxtb	r3, r3
  62              	.LVL6:
  63              	.L2:
  72:Core/Src/main.c ****     for (uint8_t i = 0; i < 16; i++) {
  64              		.loc 1 72 27 is_stmt 1 discriminator 1 view .LVU12
  65 000e 0F2B     		cmp	r3, #15
  66 0010 05D8     		bhi	.L5
  73:Core/Src/main.c ****         if (value & 0x1) {
  67              		.loc 1 73 9 view .LVU13
  73:Core/Src/main.c ****         if (value & 0x1) {
  68              		.loc 1 73 12 is_stmt 0 view .LVU14
  69 0012 12F0010F 		tst	r2, #1
  70 0016 F7D0     		beq	.L3
  74:Core/Src/main.c ****         }
  71              		.loc 1 74 13 is_stmt 1 view .LVU15
  74:Core/Src/main.c ****         }
  72              		.loc 1 74 16 is_stmt 0 view .LVU16
  73 0018 0130     		adds	r0, r0, #1
  74              	.LVL7:
  74:Core/Src/main.c ****         }
  75              		.loc 1 74 16 view .LVU17
  76 001a C0B2     		uxtb	r0, r0
  77              	.LVL8:
  74:Core/Src/main.c ****         }
  78              		.loc 1 74 16 view .LVU18
  79 001c F4E7     		b	.L3
  80              	.L5:
  74:Core/Src/main.c ****         }
  81              		.loc 1 74 16 view .LVU19
  82              	.LBE5:
  77:Core/Src/main.c ****     }
  78:Core/Src/main.c ****     return cnt & 0x1;
  83              		.loc 1 78 5 is_stmt 1 view .LVU20
ARM GAS  /var/folders/l2/71_2bdwd5hl5fnnvwg2sr4v80000gn/T//ccUkH8w1.s 			page 4


  79:Core/Src/main.c **** }
  84              		.loc 1 79 1 is_stmt 0 view .LVU21
  85 001e 00F00100 		and	r0, r0, #1
  86              	.LVL9:
  87              		.loc 1 79 1 view .LVU22
  88 0022 7047     		bx	lr
  89              		.cfi_endproc
  90              	.LFE126:
  92              		.section	.text.AS5048A_read,"ax",%progbits
  93              		.align	1
  94              		.global	AS5048A_read
  95              		.syntax unified
  96              		.thumb
  97              		.thumb_func
  99              	AS5048A_read:
 100              	.LVL10:
 101              	.LFB127:
  80:Core/Src/main.c **** 
  81:Core/Src/main.c **** uint16_t AS5048A_read(uint16_t registerAddress) {
 102              		.loc 1 81 49 is_stmt 1 view -0
 103              		.cfi_startproc
 104              		@ args = 0, pretend = 0, frame = 8
 105              		@ frame_needed = 0, uses_anonymous_args = 0
 106              		.loc 1 81 49 is_stmt 0 view .LVU24
 107 0000 30B5     		push	{r4, r5, lr}
 108              	.LCFI0:
 109              		.cfi_def_cfa_offset 12
 110              		.cfi_offset 4, -12
 111              		.cfi_offset 5, -8
 112              		.cfi_offset 14, -4
 113 0002 83B0     		sub	sp, sp, #12
 114              	.LCFI1:
 115              		.cfi_def_cfa_offset 24
  82:Core/Src/main.c ****     uint16_t command = 0x4000 | registerAddress;
 116              		.loc 1 82 5 is_stmt 1 view .LVU25
 117              		.loc 1 82 14 is_stmt 0 view .LVU26
 118 0004 40F48044 		orr	r4, r0, #16384
 119 0008 ADF80640 		strh	r4, [sp, #6]	@ movhi
  83:Core/Src/main.c **** 
  84:Core/Src/main.c ****     // パリティビットの追加
  85:Core/Src/main.c ****     command |= spiCalcEvenParity(command) << 15;
 120              		.loc 1 85 5 is_stmt 1 view .LVU27
 121              		.loc 1 85 16 is_stmt 0 view .LVU28
 122 000c 2046     		mov	r0, r4
 123              	.LVL11:
 124              		.loc 1 85 16 view .LVU29
 125 000e FFF7FEFF 		bl	spiCalcEvenParity
 126              	.LVL12:
 127              		.loc 1 85 13 view .LVU30
 128 0012 44EAC034 		orr	r4, r4, r0, lsl #15
 129 0016 ADF80640 		strh	r4, [sp, #6]	@ movhi
  86:Core/Src/main.c **** 
  87:Core/Src/main.c ****     uint16_t response = 0;
 130              		.loc 1 87 5 is_stmt 1 view .LVU31
 131              		.loc 1 87 14 is_stmt 0 view .LVU32
 132 001a 0024     		movs	r4, #0
 133 001c ADF80440 		strh	r4, [sp, #4]	@ movhi
ARM GAS  /var/folders/l2/71_2bdwd5hl5fnnvwg2sr4v80000gn/T//ccUkH8w1.s 			page 5


  88:Core/Src/main.c **** 
  89:Core/Src/main.c ****     // SPI通信開始
  90:Core/Src/main.c ****     CS_LOW();
 134              		.loc 1 90 5 is_stmt 1 view .LVU33
 135 0020 2246     		mov	r2, r4
 136 0022 1021     		movs	r1, #16
 137 0024 4FF09040 		mov	r0, #1207959552
 138 0028 FFF7FEFF 		bl	HAL_GPIO_WritePin
 139              	.LVL13:
  91:Core/Src/main.c ****     HAL_SPI_Transmit(&hspi1, (uint8_t *)&command, 1, HAL_MAX_DELAY);
 140              		.loc 1 91 5 view .LVU34
 141 002c 134D     		ldr	r5, .L8
 142 002e 4FF0FF33 		mov	r3, #-1
 143 0032 0122     		movs	r2, #1
 144 0034 0DF10601 		add	r1, sp, #6
 145 0038 2846     		mov	r0, r5
 146 003a FFF7FEFF 		bl	HAL_SPI_Transmit
 147              	.LVL14:
  92:Core/Src/main.c ****     CS_HIGH();
 148              		.loc 1 92 5 view .LVU35
 149 003e 0122     		movs	r2, #1
 150 0040 1021     		movs	r1, #16
 151 0042 4FF09040 		mov	r0, #1207959552
 152 0046 FFF7FEFF 		bl	HAL_GPIO_WritePin
 153              	.LVL15:
  93:Core/Src/main.c **** 
  94:Core/Src/main.c ****     // データ受信
  95:Core/Src/main.c ****     CS_LOW();
 154              		.loc 1 95 5 view .LVU36
 155 004a 2246     		mov	r2, r4
 156 004c 1021     		movs	r1, #16
 157 004e 4FF09040 		mov	r0, #1207959552
 158 0052 FFF7FEFF 		bl	HAL_GPIO_WritePin
 159              	.LVL16:
  96:Core/Src/main.c ****     HAL_SPI_Receive(&hspi1, (uint8_t *)&response, 1, HAL_MAX_DELAY);
 160              		.loc 1 96 5 view .LVU37
 161 0056 4FF0FF33 		mov	r3, #-1
 162 005a 0122     		movs	r2, #1
 163 005c 01A9     		add	r1, sp, #4
 164 005e 2846     		mov	r0, r5
 165 0060 FFF7FEFF 		bl	HAL_SPI_Receive
 166              	.LVL17:
  97:Core/Src/main.c ****     CS_HIGH();
 167              		.loc 1 97 5 view .LVU38
 168 0064 0122     		movs	r2, #1
 169 0066 1021     		movs	r1, #16
 170 0068 4FF09040 		mov	r0, #1207959552
 171 006c FFF7FEFF 		bl	HAL_GPIO_WritePin
 172              	.LVL18:
  98:Core/Src/main.c **** 
  99:Core/Src/main.c ****     // エラービットの確認（必要に応じて実装）
 100:Core/Src/main.c ****     if (response & 0x4000) {
 173              		.loc 1 100 5 view .LVU39
 174              		.loc 1 100 18 is_stmt 0 view .LVU40
 175 0070 BDF80400 		ldrh	r0, [sp, #4]
 101:Core/Src/main.c ****         // エラー処理
 102:Core/Src/main.c ****     }
ARM GAS  /var/folders/l2/71_2bdwd5hl5fnnvwg2sr4v80000gn/T//ccUkH8w1.s 			page 6


 176              		.loc 1 102 5 is_stmt 1 view .LVU41
 103:Core/Src/main.c **** 
 104:Core/Src/main.c ****     return response & 0x3FFF;  // データ部分のみ返す
 177              		.loc 1 104 5 view .LVU42
 105:Core/Src/main.c **** }
 178              		.loc 1 105 1 is_stmt 0 view .LVU43
 179 0074 C0F30D00 		ubfx	r0, r0, #0, #14
 180 0078 03B0     		add	sp, sp, #12
 181              	.LCFI2:
 182              		.cfi_def_cfa_offset 12
 183              		@ sp needed
 184 007a 30BD     		pop	{r4, r5, pc}
 185              	.L9:
 186              		.align	2
 187              	.L8:
 188 007c 00000000 		.word	hspi1
 189              		.cfi_endproc
 190              	.LFE127:
 192              		.section	.text.getRotation,"ax",%progbits
 193              		.align	1
 194              		.global	getRotation
 195              		.syntax unified
 196              		.thumb
 197              		.thumb_func
 199              	getRotation:
 200              	.LFB128:
 106:Core/Src/main.c **** 
 107:Core/Src/main.c **** int offset = 0;
 108:Core/Src/main.c **** int16_t getRotation() {
 201              		.loc 1 108 23 is_stmt 1 view -0
 202              		.cfi_startproc
 203              		@ args = 0, pretend = 0, frame = 0
 204              		@ frame_needed = 0, uses_anonymous_args = 0
 205 0000 08B5     		push	{r3, lr}
 206              	.LCFI3:
 207              		.cfi_def_cfa_offset 8
 208              		.cfi_offset 3, -8
 209              		.cfi_offset 14, -4
 109:Core/Src/main.c ****     uint16_t data = AS5048A_read(AS5048A_ANGLE);
 210              		.loc 1 109 5 view .LVU45
 211              		.loc 1 109 21 is_stmt 0 view .LVU46
 212 0002 43F6FF70 		movw	r0, #16383
 213 0006 FFF7FEFF 		bl	AS5048A_read
 214              	.LVL19:
 110:Core/Src/main.c ****     int16_t rotation = (int16_t)data;
 215              		.loc 1 110 5 is_stmt 1 view .LVU47
 111:Core/Src/main.c ****     return rotation;
 216              		.loc 1 111 5 view .LVU48
 112:Core/Src/main.c **** }
 217              		.loc 1 112 1 is_stmt 0 view .LVU49
 218 000a 00B2     		sxth	r0, r0
 219              		.loc 1 112 1 view .LVU50
 220 000c 08BD     		pop	{r3, pc}
 221              		.cfi_endproc
 222              	.LFE128:
 224              		.section	.text.electrical_angle,"ax",%progbits
 225              		.align	1
ARM GAS  /var/folders/l2/71_2bdwd5hl5fnnvwg2sr4v80000gn/T//ccUkH8w1.s 			page 7


 226              		.global	electrical_angle
 227              		.syntax unified
 228              		.thumb
 229              		.thumb_func
 231              	electrical_angle:
 232              	.LVL20:
 233              	.LFB129:
 113:Core/Src/main.c **** 
 114:Core/Src/main.c **** // 電気角
 115:Core/Src/main.c **** uint16_t electrical_angle(int16_t real_angle) {
 234              		.loc 1 115 47 is_stmt 1 view -0
 235              		.cfi_startproc
 236              		@ args = 0, pretend = 0, frame = 0
 237              		@ frame_needed = 0, uses_anonymous_args = 0
 238              		@ link register save eliminated.
 116:Core/Src/main.c ****     uint32_t rotation = real_angle;
 239              		.loc 1 116 5 view .LVU52
 117:Core/Src/main.c **** 
 118:Core/Src/main.c ****     // 7回で一回転
 119:Core/Src/main.c ****     rotation %= 1170;
 240              		.loc 1 119 5 view .LVU53
 241              		.loc 1 119 14 is_stmt 0 view .LVU54
 242 0000 4308     		lsrs	r3, r0, #1
 243 0002 054A     		ldr	r2, .L13
 244 0004 A2FB0323 		umull	r2, r3, r2, r3
 245 0008 5B0A     		lsrs	r3, r3, #9
 246 000a 40F29242 		movw	r2, #1170
 247 000e 02FB1303 		mls	r3, r2, r3, r0
 248              	.LVL21:
 120:Core/Src/main.c **** 
 121:Core/Src/main.c ****     return (uint16_t)rotation;
 249              		.loc 1 121 5 is_stmt 1 view .LVU55
 122:Core/Src/main.c **** }
 250              		.loc 1 122 1 is_stmt 0 view .LVU56
 251 0012 98B2     		uxth	r0, r3
 252              	.LVL22:
 253              		.loc 1 122 1 view .LVU57
 254 0014 7047     		bx	lr
 255              	.L14:
 256 0016 00BF     		.align	2
 257              	.L13:
 258 0018 E1000EE0 		.word	-535953183
 259              		.cfi_endproc
 260              	.LFE129:
 262              		.section	.text.setPhase,"ax",%progbits
 263              		.align	1
 264              		.global	setPhase
 265              		.syntax unified
 266              		.thumb
 267              		.thumb_func
 269              	setPhase:
 270              	.LVL23:
 271              	.LFB130:
 123:Core/Src/main.c **** 
 124:Core/Src/main.c **** float cos_table[1170];
 125:Core/Src/main.c **** 
 126:Core/Src/main.c **** void setPhase(uint16_t phase, uint16_t pwm_pwr) {
ARM GAS  /var/folders/l2/71_2bdwd5hl5fnnvwg2sr4v80000gn/T//ccUkH8w1.s 			page 8


 272              		.loc 1 126 49 is_stmt 1 view -0
 273              		.cfi_startproc
 274              		@ args = 0, pretend = 0, frame = 8
 275              		@ frame_needed = 0, uses_anonymous_args = 0
 276              		.loc 1 126 49 is_stmt 0 view .LVU59
 277 0000 30B5     		push	{r4, r5, lr}
 278              	.LCFI4:
 279              		.cfi_def_cfa_offset 12
 280              		.cfi_offset 4, -12
 281              		.cfi_offset 5, -8
 282              		.cfi_offset 14, -4
 283 0002 83B0     		sub	sp, sp, #12
 284              	.LCFI5:
 285              		.cfi_def_cfa_offset 24
 127:Core/Src/main.c ****     uint16_t sinwave[3];
 286              		.loc 1 127 5 is_stmt 1 view .LVU60
 128:Core/Src/main.c **** 
 129:Core/Src/main.c ****     pwm_pwr = pwm_pwr > 320 ? 320 : pwm_pwr;
 287              		.loc 1 129 5 view .LVU61
 288              		.loc 1 129 13 is_stmt 0 view .LVU62
 289 0004 B1F5A07F 		cmp	r1, #320
 290 0008 28BF     		it	cs
 291 000a 4FF4A071 		movcs	r1, #320
 292              	.LVL24:
 130:Core/Src/main.c **** 
 131:Core/Src/main.c ****     sinwave[0] = pwm_pwr + pwm_pwr * cos_table[(phase + 0) % 1170];
 293              		.loc 1 131 5 is_stmt 1 view .LVU63
 294              		.loc 1 131 26 is_stmt 0 view .LVU64
 295 000e 07EE901A 		vmov	s15, r1	@ int
 296 0012 F8EEE77A 		vcvt.f32.s32	s15, s15
 297              		.loc 1 131 60 view .LVU65
 298 0016 294B     		ldr	r3, .L17
 299 0018 83FB0012 		smull	r1, r2, r3, r0
 300              	.LVL25:
 301              		.loc 1 131 60 view .LVU66
 302 001c 0244     		add	r2, r2, r0
 303 001e 9212     		asrs	r2, r2, #10
 304 0020 40F2924C 		movw	ip, #1170
 305 0024 0CFB1202 		mls	r2, ip, r2, r0
 306              		.loc 1 131 47 view .LVU67
 307 0028 254C     		ldr	r4, .L17+4
 308 002a 04EB8202 		add	r2, r4, r2, lsl #2
 309 002e 92ED007A 		vldr.32	s14, [r2]
 310              		.loc 1 131 36 view .LVU68
 311 0032 27EE877A 		vmul.f32	s14, s15, s14
 312              		.loc 1 131 26 view .LVU69
 313 0036 37EE877A 		vadd.f32	s14, s15, s14
 314              		.loc 1 131 16 view .LVU70
 315 003a BCEEC77A 		vcvt.u32.f32	s14, s14
 316 003e 17EE102A 		vmov	r2, s14	@ int
 317 0042 91B2     		uxth	r1, r2
 318 0044 ADF80010 		strh	r1, [sp]	@ movhi
 132:Core/Src/main.c ****     sinwave[1] = pwm_pwr + pwm_pwr * cos_table[(phase + 780) % 1170];
 319              		.loc 1 132 5 is_stmt 1 view .LVU71
 320              		.loc 1 132 55 is_stmt 0 view .LVU72
 321 0048 00F5437E 		add	lr, r0, #780
 322              		.loc 1 132 62 view .LVU73
ARM GAS  /var/folders/l2/71_2bdwd5hl5fnnvwg2sr4v80000gn/T//ccUkH8w1.s 			page 9


 323 004c 83FB0E52 		smull	r5, r2, r3, lr
 324 0050 7244     		add	r2, r2, lr
 325 0052 9212     		asrs	r2, r2, #10
 326 0054 0CFB12E2 		mls	r2, ip, r2, lr
 327              		.loc 1 132 47 view .LVU74
 328 0058 04EB8202 		add	r2, r4, r2, lsl #2
 329 005c 92ED007A 		vldr.32	s14, [r2]
 330              		.loc 1 132 36 view .LVU75
 331 0060 27EE877A 		vmul.f32	s14, s15, s14
 332              		.loc 1 132 26 view .LVU76
 333 0064 37EE877A 		vadd.f32	s14, s15, s14
 334              		.loc 1 132 16 view .LVU77
 335 0068 BCEEC77A 		vcvt.u32.f32	s14, s14
 336 006c 17EE102A 		vmov	r2, s14	@ int
 337 0070 92B2     		uxth	r2, r2
 338 0072 ADF80220 		strh	r2, [sp, #2]	@ movhi
 133:Core/Src/main.c ****     sinwave[2] = pwm_pwr + pwm_pwr * cos_table[(phase + 390) % 1170];
 339              		.loc 1 133 5 is_stmt 1 view .LVU78
 340              		.loc 1 133 55 is_stmt 0 view .LVU79
 341 0076 00F5C370 		add	r0, r0, #390
 342              	.LVL26:
 343              		.loc 1 133 62 view .LVU80
 344 007a 83FB00E3 		smull	lr, r3, r3, r0
 345 007e 0344     		add	r3, r3, r0
 346 0080 9B12     		asrs	r3, r3, #10
 347 0082 0CFB1303 		mls	r3, ip, r3, r0
 348              		.loc 1 133 47 view .LVU81
 349 0086 04EB8304 		add	r4, r4, r3, lsl #2
 350 008a 94ED007A 		vldr.32	s14, [r4]
 351              		.loc 1 133 36 view .LVU82
 352 008e 27EE877A 		vmul.f32	s14, s15, s14
 353              		.loc 1 133 26 view .LVU83
 354 0092 77EE877A 		vadd.f32	s15, s15, s14
 355              		.loc 1 133 16 view .LVU84
 356 0096 FCEEE77A 		vcvt.u32.f32	s15, s15
 357 009a 17EE903A 		vmov	r3, s15	@ int
 358 009e 9BB2     		uxth	r3, r3
 359 00a0 ADF80430 		strh	r3, [sp, #4]	@ movhi
 134:Core/Src/main.c **** 
 135:Core/Src/main.c ****     // A相
 136:Core/Src/main.c ****     __HAL_TIM_SET_COMPARE(&htim1, TIM_CHANNEL_1, sinwave[0]);
 360              		.loc 1 136 5 is_stmt 1 view .LVU85
 361 00a4 0748     		ldr	r0, .L17+8
 362 00a6 0068     		ldr	r0, [r0]
 363 00a8 4163     		str	r1, [r0, #52]
 137:Core/Src/main.c **** 
 138:Core/Src/main.c ****     // B相
 139:Core/Src/main.c ****     __HAL_TIM_SET_COMPARE(&htim16, TIM_CHANNEL_1, sinwave[1]);
 364              		.loc 1 139 5 view .LVU86
 365 00aa 0749     		ldr	r1, .L17+12
 366 00ac 0968     		ldr	r1, [r1]
 367 00ae 4A63     		str	r2, [r1, #52]
 140:Core/Src/main.c **** 
 141:Core/Src/main.c ****     // C相
 142:Core/Src/main.c ****     __HAL_TIM_SET_COMPARE(&htim3, TIM_CHANNEL_4, sinwave[2]);
 368              		.loc 1 142 5 view .LVU87
 369 00b0 064A     		ldr	r2, .L17+16
ARM GAS  /var/folders/l2/71_2bdwd5hl5fnnvwg2sr4v80000gn/T//ccUkH8w1.s 			page 10


 370 00b2 1268     		ldr	r2, [r2]
 371 00b4 1364     		str	r3, [r2, #64]
 143:Core/Src/main.c ****     __HAL_TIM_SET_COMPARE(&htim1, TIM_CHANNEL_3, sinwave[2]);
 372              		.loc 1 143 5 view .LVU88
 373 00b6 C363     		str	r3, [r0, #60]
 144:Core/Src/main.c **** }
 374              		.loc 1 144 1 is_stmt 0 view .LVU89
 375 00b8 03B0     		add	sp, sp, #12
 376              	.LCFI6:
 377              		.cfi_def_cfa_offset 12
 378              		@ sp needed
 379 00ba 30BD     		pop	{r4, r5, pc}
 380              	.L18:
 381              		.align	2
 382              	.L17:
 383 00bc E1000EE0 		.word	-535953183
 384 00c0 00000000 		.word	cos_table
 385 00c4 00000000 		.word	htim1
 386 00c8 00000000 		.word	htim16
 387 00cc 00000000 		.word	htim3
 388              		.cfi_endproc
 389              	.LFE130:
 391              		.section	.text.setVoltage,"ax",%progbits
 392              		.align	1
 393              		.global	setVoltage
 394              		.syntax unified
 395              		.thumb
 396              		.thumb_func
 398              	setVoltage:
 399              	.LVL27:
 400              	.LFB131:
 145:Core/Src/main.c **** 
 146:Core/Src/main.c **** void setVoltage(float a, float b, float c) {
 401              		.loc 1 146 44 is_stmt 1 view -0
 402              		.cfi_startproc
 403              		@ args = 0, pretend = 0, frame = 0
 404              		@ frame_needed = 0, uses_anonymous_args = 0
 405              		@ link register save eliminated.
 147:Core/Src/main.c ****     float batt_voltage = 17;  // バッテリー電圧
 406              		.loc 1 147 5 view .LVU91
 148:Core/Src/main.c **** 
 149:Core/Src/main.c ****     // 電圧値を 0-1023 の範囲にマッピングする
 150:Core/Src/main.c ****     // 電圧 a, b, c をバッテリー電圧で正規化し、0〜1023の範囲にスケーリン
 151:Core/Src/main.c ****     int int_a = (int)((a / batt_voltage) * 1023) + 512;
 407              		.loc 1 151 5 view .LVU92
 408              		.loc 1 151 26 is_stmt 0 view .LVU93
 409 0000 F3EE016A 		vmov.f32	s13, #1.7e+1
 410 0004 C0EE267A 		vdiv.f32	s15, s0, s13
 411              		.loc 1 151 42 view .LVU94
 412 0008 9FED207A 		vldr.32	s14, .L20
 413 000c 67EE877A 		vmul.f32	s15, s15, s14
 414              		.loc 1 151 17 view .LVU95
 415 0010 FDEEE77A 		vcvt.s32.f32	s15, s15
 416 0014 17EE901A 		vmov	r1, s15	@ int
 417              		.loc 1 151 9 view .LVU96
 418 0018 01F50071 		add	r1, r1, #512
 419              	.LVL28:
ARM GAS  /var/folders/l2/71_2bdwd5hl5fnnvwg2sr4v80000gn/T//ccUkH8w1.s 			page 11


 152:Core/Src/main.c ****     int int_b = (int)((b / batt_voltage) * 1023) + 512;
 420              		.loc 1 152 5 is_stmt 1 view .LVU97
 421              		.loc 1 152 26 is_stmt 0 view .LVU98
 422 001c C0EEA67A 		vdiv.f32	s15, s1, s13
 423              		.loc 1 152 42 view .LVU99
 424 0020 67EE877A 		vmul.f32	s15, s15, s14
 425              		.loc 1 152 17 view .LVU100
 426 0024 FDEEE77A 		vcvt.s32.f32	s15, s15
 427 0028 17EE902A 		vmov	r2, s15	@ int
 428              		.loc 1 152 9 view .LVU101
 429 002c 02F50072 		add	r2, r2, #512
 430              	.LVL29:
 153:Core/Src/main.c ****     int int_c = (int)((c / batt_voltage) * 1023) + 512;
 431              		.loc 1 153 5 is_stmt 1 view .LVU102
 432              		.loc 1 153 26 is_stmt 0 view .LVU103
 433 0030 C1EE267A 		vdiv.f32	s15, s2, s13
 434              		.loc 1 153 42 view .LVU104
 435 0034 67EE877A 		vmul.f32	s15, s15, s14
 436              		.loc 1 153 17 view .LVU105
 437 0038 FDEEE77A 		vcvt.s32.f32	s15, s15
 438 003c 17EE903A 		vmov	r3, s15	@ int
 439              		.loc 1 153 9 view .LVU106
 440 0040 03F50073 		add	r3, r3, #512
 441              	.LVL30:
 154:Core/Src/main.c **** 
 155:Core/Src/main.c ****     // clip [ 100, 900 ]
 156:Core/Src/main.c ****     int clip_low = 200;
 442              		.loc 1 156 5 is_stmt 1 view .LVU107
 157:Core/Src/main.c ****     int clip_high = 800;
 443              		.loc 1 157 5 view .LVU108
 158:Core/Src/main.c **** 
 159:Core/Src/main.c ****     int_a = int_a < clip_low ? clip_low : int_a;
 444              		.loc 1 159 5 view .LVU109
 445              		.loc 1 159 11 is_stmt 0 view .LVU110
 446 0044 C829     		cmp	r1, #200
 447 0046 B8BF     		it	lt
 448 0048 C821     		movlt	r1, #200
 449              	.LVL31:
 160:Core/Src/main.c ****     int_a = int_a > clip_high ? clip_high : int_a;
 450              		.loc 1 160 5 is_stmt 1 view .LVU111
 451              		.loc 1 160 11 is_stmt 0 view .LVU112
 452 004a B1F5487F 		cmp	r1, #800
 453 004e A8BF     		it	ge
 454 0050 4FF44871 		movge	r1, #800
 455              	.LVL32:
 161:Core/Src/main.c **** 
 162:Core/Src/main.c ****     int_b = int_b < clip_low ? clip_low : int_b;
 456              		.loc 1 162 5 is_stmt 1 view .LVU113
 457              		.loc 1 162 11 is_stmt 0 view .LVU114
 458 0054 C82A     		cmp	r2, #200
 459 0056 B8BF     		it	lt
 460 0058 C822     		movlt	r2, #200
 461              	.LVL33:
 163:Core/Src/main.c ****     int_b = int_b > clip_high ? clip_high : int_b;
 462              		.loc 1 163 5 is_stmt 1 view .LVU115
 463              		.loc 1 163 11 is_stmt 0 view .LVU116
 464 005a B2F5487F 		cmp	r2, #800
ARM GAS  /var/folders/l2/71_2bdwd5hl5fnnvwg2sr4v80000gn/T//ccUkH8w1.s 			page 12


 465 005e A8BF     		it	ge
 466 0060 4FF44872 		movge	r2, #800
 467              	.LVL34:
 164:Core/Src/main.c **** 
 165:Core/Src/main.c ****     int_c = int_c < clip_low ? clip_low : int_c;
 468              		.loc 1 165 5 is_stmt 1 view .LVU117
 469              		.loc 1 165 11 is_stmt 0 view .LVU118
 470 0064 C82B     		cmp	r3, #200
 471 0066 B8BF     		it	lt
 472 0068 C823     		movlt	r3, #200
 473              	.LVL35:
 166:Core/Src/main.c ****     int_c = int_c > clip_high ? clip_high : int_c;
 474              		.loc 1 166 5 is_stmt 1 view .LVU119
 475              		.loc 1 166 11 is_stmt 0 view .LVU120
 476 006a B3F5487F 		cmp	r3, #800
 477 006e A8BF     		it	ge
 478 0070 4FF44873 		movge	r3, #800
 479              	.LVL36:
 167:Core/Src/main.c **** 
 168:Core/Src/main.c ****     // PWM信号を各チャネルに設定
 169:Core/Src/main.c ****     // A相
 170:Core/Src/main.c ****     __HAL_TIM_SET_COMPARE(&htim1, TIM_CHANNEL_1, int_a);
 480              		.loc 1 170 5 is_stmt 1 view .LVU121
 481 0074 0648     		ldr	r0, .L20+4
 482 0076 0068     		ldr	r0, [r0]
 483 0078 4163     		str	r1, [r0, #52]
 171:Core/Src/main.c **** 
 172:Core/Src/main.c ****     // B相
 173:Core/Src/main.c ****     __HAL_TIM_SET_COMPARE(&htim16, TIM_CHANNEL_1, int_b);
 484              		.loc 1 173 5 view .LVU122
 485 007a 0649     		ldr	r1, .L20+8
 486              	.LVL37:
 487              		.loc 1 173 5 is_stmt 0 view .LVU123
 488 007c 0968     		ldr	r1, [r1]
 489 007e 4A63     		str	r2, [r1, #52]
 490              	.LVL38:
 174:Core/Src/main.c **** 
 175:Core/Src/main.c ****     // C相
 176:Core/Src/main.c ****     __HAL_TIM_SET_COMPARE(&htim3, TIM_CHANNEL_4, int_c);
 491              		.loc 1 176 5 is_stmt 1 view .LVU124
 492 0080 054A     		ldr	r2, .L20+12
 493              	.LVL39:
 494              		.loc 1 176 5 is_stmt 0 view .LVU125
 495 0082 1268     		ldr	r2, [r2]
 496 0084 1364     		str	r3, [r2, #64]
 497              	.LVL40:
 177:Core/Src/main.c ****     __HAL_TIM_SET_COMPARE(&htim1, TIM_CHANNEL_3, int_c);
 498              		.loc 1 177 5 is_stmt 1 view .LVU126
 499 0086 C363     		str	r3, [r0, #60]
 178:Core/Src/main.c **** }
 500              		.loc 1 178 1 is_stmt 0 view .LVU127
 501 0088 7047     		bx	lr
 502              	.L21:
 503 008a 00BF     		.align	2
 504              	.L20:
 505 008c 00C07F44 		.word	1149222912
 506 0090 00000000 		.word	htim1
ARM GAS  /var/folders/l2/71_2bdwd5hl5fnnvwg2sr4v80000gn/T//ccUkH8w1.s 			page 13


 507 0094 00000000 		.word	htim16
 508 0098 00000000 		.word	htim3
 509              		.cfi_endproc
 510              	.LFE131:
 512              		.section	.text.uint2char,"ax",%progbits
 513              		.align	1
 514              		.global	uint2char
 515              		.syntax unified
 516              		.thumb
 517              		.thumb_func
 519              	uint2char:
 520              	.LVL41:
 521              	.LFB132:
 179:Core/Src/main.c **** 
 180:Core/Src/main.c **** char *uint2char(uint16_t num) {
 522              		.loc 1 180 31 is_stmt 1 view -0
 523              		.cfi_startproc
 524              		@ args = 0, pretend = 0, frame = 0
 525              		@ frame_needed = 0, uses_anonymous_args = 0
 526              		@ link register save eliminated.
 527              		.loc 1 180 31 is_stmt 0 view .LVU129
 528 0000 0146     		mov	r1, r0
 181:Core/Src/main.c ****     static char str[5];
 529              		.loc 1 181 5 is_stmt 1 view .LVU130
 182:Core/Src/main.c ****     str[0] = num / 1000 + '0';
 530              		.loc 1 182 5 view .LVU131
 531              		.loc 1 182 25 is_stmt 0 view .LVU132
 532 0002 164B     		ldr	r3, .L23
 533 0004 A3FB0023 		umull	r2, r3, r3, r0
 534 0008 9B09     		lsrs	r3, r3, #6
 535 000a 03F13002 		add	r2, r3, #48
 536              		.loc 1 182 12 view .LVU133
 537 000e 1448     		ldr	r0, .L23+4
 538              	.LVL42:
 539              		.loc 1 182 12 view .LVU134
 540 0010 0270     		strb	r2, [r0]
 183:Core/Src/main.c ****     str[1] = (num % 1000) / 100 + '0';
 541              		.loc 1 183 5 is_stmt 1 view .LVU135
 542              		.loc 1 183 33 is_stmt 0 view .LVU136
 543 0012 4FF47A72 		mov	r2, #1000
 544 0016 02FB1312 		mls	r2, r2, r3, r1
 545 001a 92B2     		uxth	r2, r2
 546 001c 114B     		ldr	r3, .L23+8
 547 001e A3FB02C2 		umull	ip, r2, r3, r2
 548 0022 5209     		lsrs	r2, r2, #5
 549 0024 3032     		adds	r2, r2, #48
 550              		.loc 1 183 12 view .LVU137
 551 0026 4270     		strb	r2, [r0, #1]
 184:Core/Src/main.c ****     str[2] = (num % 100) / 10 + '0';
 552              		.loc 1 184 5 is_stmt 1 view .LVU138
 553              		.loc 1 184 31 is_stmt 0 view .LVU139
 554 0028 A3FB0123 		umull	r2, r3, r3, r1
 555 002c 5B09     		lsrs	r3, r3, #5
 556 002e 6422     		movs	r2, #100
 557 0030 02FB1313 		mls	r3, r2, r3, r1
 558 0034 9BB2     		uxth	r3, r3
 559 0036 0C4A     		ldr	r2, .L23+12
ARM GAS  /var/folders/l2/71_2bdwd5hl5fnnvwg2sr4v80000gn/T//ccUkH8w1.s 			page 14


 560 0038 A2FB03C3 		umull	ip, r3, r2, r3
 561 003c DB08     		lsrs	r3, r3, #3
 562 003e 3033     		adds	r3, r3, #48
 563              		.loc 1 184 12 view .LVU140
 564 0040 8370     		strb	r3, [r0, #2]
 185:Core/Src/main.c ****     str[3] = num % 10 + '0';
 565              		.loc 1 185 5 is_stmt 1 view .LVU141
 566              		.loc 1 185 23 is_stmt 0 view .LVU142
 567 0042 A2FB0123 		umull	r2, r3, r2, r1
 568 0046 DB08     		lsrs	r3, r3, #3
 569 0048 03EB8303 		add	r3, r3, r3, lsl #2
 570 004c A1EB4301 		sub	r1, r1, r3, lsl #1
 571 0050 3031     		adds	r1, r1, #48
 572              		.loc 1 185 12 view .LVU143
 573 0052 C170     		strb	r1, [r0, #3]
 186:Core/Src/main.c ****     str[4] = '\0';
 574              		.loc 1 186 5 is_stmt 1 view .LVU144
 575              		.loc 1 186 12 is_stmt 0 view .LVU145
 576 0054 0023     		movs	r3, #0
 577 0056 0371     		strb	r3, [r0, #4]
 187:Core/Src/main.c **** 
 188:Core/Src/main.c ****     return str;
 578              		.loc 1 188 5 is_stmt 1 view .LVU146
 189:Core/Src/main.c **** }
 579              		.loc 1 189 1 is_stmt 0 view .LVU147
 580 0058 7047     		bx	lr
 581              	.L24:
 582 005a 00BF     		.align	2
 583              	.L23:
 584 005c D34D6210 		.word	274877907
 585 0060 00000000 		.word	str.3
 586 0064 1F85EB51 		.word	1374389535
 587 0068 CDCCCCCC 		.word	-858993459
 588              		.cfi_endproc
 589              	.LFE132:
 591              		.global	__aeabi_i2d
 592              		.global	__aeabi_dmul
 593              		.global	__aeabi_dsub
 594              		.global	__aeabi_d2f
 595              		.global	__aeabi_dadd
 596              		.section	.text.senseOut,"ax",%progbits
 597              		.align	1
 598              		.global	senseOut
 599              		.syntax unified
 600              		.thumb
 601              		.thumb_func
 603              	senseOut:
 604              	.LFB133:
 190:Core/Src/main.c **** 
 191:Core/Src/main.c **** uint16_t adcBuffer[3];  // PA0, PA1, PA2の3つのチャンネル分のデータ
 192:Core/Src/main.c **** uint16_t adcOffset[3];  // オフセット値
 193:Core/Src/main.c **** 
 194:Core/Src/main.c **** float sense[3];
 195:Core/Src/main.c **** void senseOut() {
 605              		.loc 1 195 17 is_stmt 1 view -0
 606              		.cfi_startproc
 607              		@ args = 0, pretend = 0, frame = 24
ARM GAS  /var/folders/l2/71_2bdwd5hl5fnnvwg2sr4v80000gn/T//ccUkH8w1.s 			page 15


 608              		@ frame_needed = 0, uses_anonymous_args = 0
 609 0000 2DE9F04F 		push	{r4, r5, r6, r7, r8, r9, r10, fp, lr}
 610              	.LCFI7:
 611              		.cfi_def_cfa_offset 36
 612              		.cfi_offset 4, -36
 613              		.cfi_offset 5, -32
 614              		.cfi_offset 6, -28
 615              		.cfi_offset 7, -24
 616              		.cfi_offset 8, -20
 617              		.cfi_offset 9, -16
 618              		.cfi_offset 10, -12
 619              		.cfi_offset 11, -8
 620              		.cfi_offset 14, -4
 621 0004 2DED028B 		vpush.64	{d8}
 622              	.LCFI8:
 623              		.cfi_def_cfa_offset 44
 624              		.cfi_offset 80, -44
 625              		.cfi_offset 81, -40
 626 0008 87B0     		sub	sp, sp, #28
 627              	.LCFI9:
 628              		.cfi_def_cfa_offset 72
 196:Core/Src/main.c ****     float _sense[3];
 629              		.loc 1 196 5 view .LVU149
 197:Core/Src/main.c ****     _sense[0] = 0.995832 * (adcBuffer[0] - 2048) -
 630              		.loc 1 197 5 view .LVU150
 631              		.loc 1 197 38 is_stmt 0 view .LVU151
 632 000a DFF8A0A1 		ldr	r10, .L27+68
 633 000e BAF80000 		ldrh	r0, [r10]
 634              		.loc 1 197 26 view .LVU152
 635 0012 A0F50060 		sub	r0, r0, #2048
 636 0016 FFF7FEFF 		bl	__aeabi_i2d
 637              	.LVL43:
 638 001a 0646     		mov	r6, r0
 639 001c 0F46     		mov	r7, r1
 640 001e 55A3     		adr	r3, .L27+12
 641 0020 D3E90023 		ldrd	r2, [r3]
 642 0024 FFF7FEFF 		bl	__aeabi_dmul
 643              	.LVL44:
 644 0028 8046     		mov	r8, r0
 645 002a 8946     		mov	r9, r1
 198:Core/Src/main.c ****                 0.028199 * (adcBuffer[1] - 2048) -
 646              		.loc 1 198 38 view .LVU153
 647 002c BAF80200 		ldrh	r0, [r10, #2]
 648              		.loc 1 198 26 view .LVU154
 649 0030 A0F50060 		sub	r0, r0, #2048
 650 0034 FFF7FEFF 		bl	__aeabi_i2d
 651              	.LVL45:
 652 0038 0246     		mov	r2, r0
 653 003a 0B46     		mov	r3, r1
 654 003c CDE90023 		strd	r2, [sp]
 655 0040 4EA3     		adr	r3, .L27+20
 656 0042 D3E90023 		ldrd	r2, [r3]
 657 0046 FFF7FEFF 		bl	__aeabi_dmul
 658              	.LVL46:
 659 004a 0446     		mov	r4, r0
 660 004c 0D46     		mov	r5, r1
 197:Core/Src/main.c ****     _sense[0] = 0.995832 * (adcBuffer[0] - 2048) -
ARM GAS  /var/folders/l2/71_2bdwd5hl5fnnvwg2sr4v80000gn/T//ccUkH8w1.s 			page 16


 661              		.loc 1 197 50 view .LVU155
 662 004e 0246     		mov	r2, r0
 663 0050 0B46     		mov	r3, r1
 664 0052 4046     		mov	r0, r8
 665 0054 4946     		mov	r1, r9
 666 0056 FFF7FEFF 		bl	__aeabi_dsub
 667              	.LVL47:
 668 005a 8046     		mov	r8, r0
 669 005c 8946     		mov	r9, r1
 199:Core/Src/main.c ****                 0.014988 * (adcBuffer[2] - 2048);
 670              		.loc 1 199 38 view .LVU156
 671 005e BAF80400 		ldrh	r0, [r10, #4]
 672              		.loc 1 199 26 view .LVU157
 673 0062 A0F50060 		sub	r0, r0, #2048
 674 0066 FFF7FEFF 		bl	__aeabi_i2d
 675              	.LVL48:
 676 006a 8246     		mov	r10, r0
 677 006c 8B46     		mov	fp, r1
 678 006e 45A3     		adr	r3, .L27+28
 679 0070 D3E90023 		ldrd	r2, [r3]
 680 0074 FFF7FEFF 		bl	__aeabi_dmul
 681              	.LVL49:
 682 0078 0246     		mov	r2, r0
 683 007a 0B46     		mov	r3, r1
 198:Core/Src/main.c ****                 0.028199 * (adcBuffer[1] - 2048) -
 684              		.loc 1 198 50 view .LVU158
 685 007c 4046     		mov	r0, r8
 686 007e 4946     		mov	r1, r9
 687 0080 FFF7FEFF 		bl	__aeabi_dsub
 688              	.LVL50:
 689 0084 FFF7FEFF 		bl	__aeabi_d2f
 690              	.LVL51:
 691 0088 08EE900A 		vmov	s17, r0
 197:Core/Src/main.c ****     _sense[0] = 0.995832 * (adcBuffer[0] - 2048) -
 692              		.loc 1 197 15 view .LVU159
 693 008c 0390     		str	r0, [sp, #12]	@ float
 200:Core/Src/main.c **** 
 201:Core/Src/main.c ****     _sense[1] = 0.037737 * (adcBuffer[0] - 2048) +
 694              		.loc 1 201 5 is_stmt 1 view .LVU160
 695              		.loc 1 201 26 is_stmt 0 view .LVU161
 696 008e 3FA3     		adr	r3, .L27+36
 697 0090 D3E90023 		ldrd	r2, [r3]
 698 0094 3046     		mov	r0, r6
 699 0096 3946     		mov	r1, r7
 700 0098 FFF7FEFF 		bl	__aeabi_dmul
 701              	.LVL52:
 702 009c 8046     		mov	r8, r0
 703 009e 8946     		mov	r9, r1
 202:Core/Src/main.c ****                 1.007723 * (adcBuffer[1] - 2048) -
 704              		.loc 1 202 26 view .LVU162
 705 00a0 3CA3     		adr	r3, .L27+44
 706 00a2 D3E90023 		ldrd	r2, [r3]
 707 00a6 DDE90001 		ldrd	r0, [sp]
 708 00aa FFF7FEFF 		bl	__aeabi_dmul
 709              	.LVL53:
 710 00ae 0246     		mov	r2, r0
 711 00b0 0B46     		mov	r3, r1
ARM GAS  /var/folders/l2/71_2bdwd5hl5fnnvwg2sr4v80000gn/T//ccUkH8w1.s 			page 17


 201:Core/Src/main.c ****                 1.007723 * (adcBuffer[1] - 2048) -
 712              		.loc 1 201 50 view .LVU163
 713 00b2 4046     		mov	r0, r8
 714 00b4 4946     		mov	r1, r9
 715 00b6 FFF7FEFF 		bl	__aeabi_dadd
 716              	.LVL54:
 717 00ba 8046     		mov	r8, r0
 718 00bc 8946     		mov	r9, r1
 203:Core/Src/main.c ****                 0.033757 * (adcBuffer[2] - 2048);
 719              		.loc 1 203 26 view .LVU164
 720 00be 37A3     		adr	r3, .L27+52
 721 00c0 D3E90023 		ldrd	r2, [r3]
 722 00c4 5046     		mov	r0, r10
 723 00c6 5946     		mov	r1, fp
 724 00c8 FFF7FEFF 		bl	__aeabi_dmul
 725              	.LVL55:
 726 00cc 0246     		mov	r2, r0
 727 00ce 0B46     		mov	r3, r1
 202:Core/Src/main.c ****                 1.007723 * (adcBuffer[1] - 2048) -
 728              		.loc 1 202 50 view .LVU165
 729 00d0 4046     		mov	r0, r8
 730 00d2 4946     		mov	r1, r9
 731 00d4 FFF7FEFF 		bl	__aeabi_dsub
 732              	.LVL56:
 733 00d8 FFF7FEFF 		bl	__aeabi_d2f
 734              	.LVL57:
 735 00dc 08EE100A 		vmov	s16, r0
 201:Core/Src/main.c ****                 1.007723 * (adcBuffer[1] - 2048) -
 736              		.loc 1 201 15 view .LVU166
 737 00e0 0490     		str	r0, [sp, #16]	@ float
 204:Core/Src/main.c **** 
 205:Core/Src/main.c ****     _sense[2] = -0.014988 * (adcBuffer[0] - 2048) -
 738              		.loc 1 205 5 is_stmt 1 view .LVU167
 739              		.loc 1 205 27 is_stmt 0 view .LVU168
 740 00e2 30A3     		adr	r3, .L27+60
 741 00e4 D3E90023 		ldrd	r2, [r3]
 742 00e8 3046     		mov	r0, r6
 743 00ea 3946     		mov	r1, r7
 744 00ec FFF7FEFF 		bl	__aeabi_dmul
 745              	.LVL58:
 746              		.loc 1 205 51 view .LVU169
 747 00f0 2246     		mov	r2, r4
 748 00f2 2B46     		mov	r3, r5
 749 00f4 FFF7FEFF 		bl	__aeabi_dsub
 750              	.LVL59:
 751 00f8 0446     		mov	r4, r0
 752 00fa 0D46     		mov	r5, r1
 206:Core/Src/main.c ****                 0.028199 * (adcBuffer[1] - 2048) +
 207:Core/Src/main.c ****                 0.995832 * (adcBuffer[2] - 2048);
 753              		.loc 1 207 26 view .LVU170
 754 00fc 1DA3     		adr	r3, .L27+12
 755 00fe D3E90023 		ldrd	r2, [r3]
 756 0102 5046     		mov	r0, r10
 757 0104 5946     		mov	r1, fp
 758 0106 FFF7FEFF 		bl	__aeabi_dmul
 759              	.LVL60:
 760 010a 0246     		mov	r2, r0
ARM GAS  /var/folders/l2/71_2bdwd5hl5fnnvwg2sr4v80000gn/T//ccUkH8w1.s 			page 18


 761 010c 0B46     		mov	r3, r1
 206:Core/Src/main.c ****                 0.028199 * (adcBuffer[1] - 2048) +
 762              		.loc 1 206 50 view .LVU171
 763 010e 2046     		mov	r0, r4
 764 0110 2946     		mov	r1, r5
 765 0112 FFF7FEFF 		bl	__aeabi_dadd
 766              	.LVL61:
 767 0116 FFF7FEFF 		bl	__aeabi_d2f
 768              	.LVL62:
 769 011a 07EE900A 		vmov	s15, r0
 205:Core/Src/main.c ****                 0.028199 * (adcBuffer[1] - 2048) +
 770              		.loc 1 205 15 view .LVU172
 771 011e 0590     		str	r0, [sp, #20]	@ float
 208:Core/Src/main.c **** 
 209:Core/Src/main.c ****     float gain = 1.2;
 772              		.loc 1 209 5 is_stmt 1 view .LVU173
 773              	.LVL63:
 210:Core/Src/main.c ****     float scaleFactor = 3.3 / 4096.0;
 774              		.loc 1 210 5 view .LVU174
 211:Core/Src/main.c **** 
 212:Core/Src/main.c ****     _sense[0] = (_sense[0] * scaleFactor) / gain;
 775              		.loc 1 212 5 view .LVU175
 776              		.loc 1 212 28 is_stmt 0 view .LVU176
 777 0120 DFED116A 		vldr.32	s13, .L27
 778 0124 68EEA68A 		vmul.f32	s17, s17, s13
 779              		.loc 1 212 43 view .LVU177
 780 0128 9FED107A 		vldr.32	s14, .L27+4
 781 012c C8EE875A 		vdiv.f32	s11, s17, s14
 782              		.loc 1 212 15 view .LVU178
 783 0130 CDED035A 		vstr.32	s11, [sp, #12]
 213:Core/Src/main.c ****     _sense[1] = (_sense[1] * scaleFactor) / gain;
 784              		.loc 1 213 5 is_stmt 1 view .LVU179
 785              		.loc 1 213 28 is_stmt 0 view .LVU180
 786 0134 28EE268A 		vmul.f32	s16, s16, s13
 787              		.loc 1 213 43 view .LVU181
 788 0138 88EE076A 		vdiv.f32	s12, s16, s14
 789              		.loc 1 213 15 view .LVU182
 790 013c 8DED046A 		vstr.32	s12, [sp, #16]
 214:Core/Src/main.c ****     _sense[2] = (_sense[2] * scaleFactor) / gain;
 791              		.loc 1 214 5 is_stmt 1 view .LVU183
 792              		.loc 1 214 28 is_stmt 0 view .LVU184
 793 0140 67EEA67A 		vmul.f32	s15, s15, s13
 794              		.loc 1 214 43 view .LVU185
 795 0144 C7EE876A 		vdiv.f32	s13, s15, s14
 796              		.loc 1 214 15 view .LVU186
 797 0148 CDED056A 		vstr.32	s13, [sp, #20]
 215:Core/Src/main.c **** 
 216:Core/Src/main.c ****     // 　ローパスフィルタ
 217:Core/Src/main.c ****     const float alpha = 1.0;
 798              		.loc 1 217 5 is_stmt 1 view .LVU187
 799              	.LVL64:
 218:Core/Src/main.c ****     // sense[0] = (1.0 - alpha) * sense[0] + alpha * _sense[0];
 219:Core/Src/main.c ****     // sense[1] = (1.0 - alpha) * sense[1] + alpha * _sense[1];
 220:Core/Src/main.c ****     // sense[2] = (1.0 - alpha) * sense[2] + alpha * _sense[2];
 221:Core/Src/main.c **** 
 222:Core/Src/main.c ****     sense[0] = _sense[0];
 800              		.loc 1 222 5 view .LVU188
ARM GAS  /var/folders/l2/71_2bdwd5hl5fnnvwg2sr4v80000gn/T//ccUkH8w1.s 			page 19


 801              		.loc 1 222 14 is_stmt 0 view .LVU189
 802 014c 084B     		ldr	r3, .L27+8
 803 014e C3ED005A 		vstr.32	s11, [r3]
 223:Core/Src/main.c ****     sense[1] = _sense[1];
 804              		.loc 1 223 5 is_stmt 1 view .LVU190
 805              		.loc 1 223 14 is_stmt 0 view .LVU191
 806 0152 83ED016A 		vstr.32	s12, [r3, #4]
 224:Core/Src/main.c ****     sense[2] = _sense[2];
 807              		.loc 1 224 5 is_stmt 1 view .LVU192
 808              		.loc 1 224 14 is_stmt 0 view .LVU193
 809 0156 C3ED026A 		vstr.32	s13, [r3, #8]
 225:Core/Src/main.c **** 
 226:Core/Src/main.c ****     // sense_A += 0.5;
 227:Core/Src/main.c ****     // sense_B += 0.45;
 228:Core/Src/main.c ****     // sense_C += 0.33;
 229:Core/Src/main.c **** }
 810              		.loc 1 229 1 view .LVU194
 811 015a 07B0     		add	sp, sp, #28
 812              	.LCFI10:
 813              		.cfi_def_cfa_offset 44
 814              		@ sp needed
 815 015c BDEC028B 		vldm	sp!, {d8}
 816              	.LCFI11:
 817              		.cfi_restore 80
 818              		.cfi_restore 81
 819              		.cfi_def_cfa_offset 36
 820 0160 BDE8F08F 		pop	{r4, r5, r6, r7, r8, r9, r10, fp, pc}
 821              	.L28:
 822 0164 AFF30080 		.align	3
 823              	.L27:
 824 0168 3333533A 		.word	978531123
 825 016c 9A99993F 		.word	1067030938
 826 0170 00000000 		.word	sense
 827 0174 C0ED0912 		.word	302640576
 828 0178 DBDDEF3F 		.word	1072684507
 829 017c 279F1EDB 		.word	-618750169
 830 0180 32E09C3F 		.word	1067245618
 831 0184 7FDAA84E 		.word	1319688831
 832 0188 07B28E3F 		.word	1066316295
 833 018c 0DC4B299 		.word	-1716337651
 834 0190 4352A33F 		.word	1067668035
 835 0194 06D50627 		.word	654759174
 836 0198 A21FF03F 		.word	1072701346
 837 019c 3BAB05F6 		.word	-167400645
 838 01a0 9848A13F 		.word	1067534488
 839 01a4 7FDAA84E 		.word	1319688831
 840 01a8 07B28EBF 		.word	-1081167353
 841 01ac 00000000 		.word	adcBuffer
 842              		.cfi_endproc
 843              	.LFE133:
 845              		.section	.text.HAL_UART_TxCpltCallback,"ax",%progbits
 846              		.align	1
 847              		.global	HAL_UART_TxCpltCallback
 848              		.syntax unified
 849              		.thumb
 850              		.thumb_func
 852              	HAL_UART_TxCpltCallback:
ARM GAS  /var/folders/l2/71_2bdwd5hl5fnnvwg2sr4v80000gn/T//ccUkH8w1.s 			page 20


 853              	.LVL65:
 854              	.LFB136:
 230:Core/Src/main.c **** 
 231:Core/Src/main.c **** short velocity = 0;
 232:Core/Src/main.c **** const uint8_t pre_scaler = 3;
 233:Core/Src/main.c **** int16_t velocity_ref = 0;
 234:Core/Src/main.c **** 
 235:Core/Src/main.c **** int16_t pwm = 0;
 236:Core/Src/main.c **** 
 237:Core/Src/main.c **** const uint8_t id = 0;
 238:Core/Src/main.c **** uint8_t isReleased = 1;
 239:Core/Src/main.c **** /* USER CODE END 0 */
 240:Core/Src/main.c **** 
 241:Core/Src/main.c **** /**
 242:Core/Src/main.c ****  * @brief  The application entry point.
 243:Core/Src/main.c ****  * @retval int
 244:Core/Src/main.c ****  */
 245:Core/Src/main.c **** int main(void) {
 246:Core/Src/main.c ****     /* USER CODE BEGIN 1 */
 247:Core/Src/main.c **** 
 248:Core/Src/main.c ****     /* USER CODE END 1 */
 249:Core/Src/main.c **** 
 250:Core/Src/main.c ****     /* MCU
 251:Core/Src/main.c ****      * Configuration--------------------------------------------------------*/
 252:Core/Src/main.c **** 
 253:Core/Src/main.c ****     /* Reset of all peripherals, Initializes the Flash interface and the
 254:Core/Src/main.c ****      * Systick. */
 255:Core/Src/main.c ****     HAL_Init();
 256:Core/Src/main.c **** 
 257:Core/Src/main.c ****     /* USER CODE BEGIN Init */
 258:Core/Src/main.c **** 
 259:Core/Src/main.c ****     /* USER CODE END Init */
 260:Core/Src/main.c **** 
 261:Core/Src/main.c ****     /* Configure the system clock */
 262:Core/Src/main.c ****     SystemClock_Config();
 263:Core/Src/main.c **** 
 264:Core/Src/main.c ****     /* USER CODE BEGIN SysInit */
 265:Core/Src/main.c **** 
 266:Core/Src/main.c ****     /* USER CODE END SysInit */
 267:Core/Src/main.c **** 
 268:Core/Src/main.c ****     /* Initialize all configured peripherals */
 269:Core/Src/main.c ****     MX_GPIO_Init();
 270:Core/Src/main.c ****     MX_DMA_Init();
 271:Core/Src/main.c ****     MX_TIM1_Init();
 272:Core/Src/main.c ****     MX_TIM16_Init();
 273:Core/Src/main.c ****     MX_TIM2_Init();
 274:Core/Src/main.c ****     MX_TIM3_Init();
 275:Core/Src/main.c ****     MX_SPI1_Init();
 276:Core/Src/main.c ****     MX_USART1_UART_Init();
 277:Core/Src/main.c ****     MX_ADC1_Init();
 278:Core/Src/main.c ****     /* USER CODE BEGIN 2 */
 279:Core/Src/main.c ****     setbuf(stdin, NULL);
 280:Core/Src/main.c ****     setbuf(stdout, NULL);
 281:Core/Src/main.c ****     setbuf(stderr, NULL);
 282:Core/Src/main.c ****     dma_printf_init(&huart1);
 283:Core/Src/main.c ****     // dma_scanf_init(&huart1);
 284:Core/Src/main.c **** 
ARM GAS  /var/folders/l2/71_2bdwd5hl5fnnvwg2sr4v80000gn/T//ccUkH8w1.s 			page 21


 285:Core/Src/main.c ****     // A相
 286:Core/Src/main.c ****     HAL_TIM_PWM_Start(&htim1, TIM_CHANNEL_1);     // H
 287:Core/Src/main.c ****     HAL_TIMEx_PWMN_Start(&htim1, TIM_CHANNEL_1);  // L
 288:Core/Src/main.c **** 
 289:Core/Src/main.c ****     // B相
 290:Core/Src/main.c ****     HAL_TIM_PWM_Start(&htim16, TIM_CHANNEL_1);     // H
 291:Core/Src/main.c ****     HAL_TIMEx_PWMN_Start(&htim16, TIM_CHANNEL_1);  // L
 292:Core/Src/main.c **** 
 293:Core/Src/main.c ****     // C相
 294:Core/Src/main.c ****     HAL_TIM_PWM_Start(&htim3, TIM_CHANNEL_4);     // H
 295:Core/Src/main.c ****     HAL_TIMEx_PWMN_Start(&htim1, TIM_CHANNEL_3);  // L
 296:Core/Src/main.c **** 
 297:Core/Src/main.c ****     // デバッグ用LED
 298:Core/Src/main.c ****     // HAL_TIM_PWM_Start(&htim2, TIM_CHANNEL_1);
 299:Core/Src/main.c **** 
 300:Core/Src/main.c ****     // タイマー用
 301:Core/Src/main.c **** 
 302:Core/Src/main.c ****     // DRVOFF
 303:Core/Src/main.c ****     HAL_GPIO_WritePin(GPIOB, GPIO_PIN_1, GPIO_PIN_RESET);
 304:Core/Src/main.c **** 
 305:Core/Src/main.c ****     HAL_ADCEx_Calibration_Start(&hadc1, ADC_SINGLE_ENDED);
 306:Core/Src/main.c **** 
 307:Core/Src/main.c ****     if (HAL_ADC_Start_DMA(&hadc1, (uint32_t *)adcBuffer, 3) == HAL_OK)
 308:Core/Src/main.c ****         printf("Start ADC Successfully\n\r");
 309:Core/Src/main.c ****     else
 310:Core/Src/main.c ****         printf("Start ADC failed\n\r");
 311:Core/Src/main.c ****     /* USER CODE END 2 */
 312:Core/Src/main.c **** 
 313:Core/Src/main.c ****     /* Infinite loop */
 314:Core/Src/main.c ****     /* USER CODE BEGIN WHILE */
 315:Core/Src/main.c **** 
 316:Core/Src/main.c ****     for (int i = 0; i < 1170; i++) {
 317:Core/Src/main.c ****         cos_table[i] = cos(radians(i * 360.0 / 1170.0));
 318:Core/Src/main.c ****     }
 319:Core/Src/main.c **** 
 320:Core/Src/main.c ****     // dma_printf_puts("BLDRV Gen2\r\n");
 321:Core/Src/main.c ****     // dma_printf_puts("Calibration Start\r\n");
 322:Core/Src/main.c ****     // setPhase(0, 100);
 323:Core/Src/main.c ****     // HAL_Delay(1000);
 324:Core/Src/main.c **** 
 325:Core/Src/main.c ****     // offset = getRotation();  // なんか3回いる
 326:Core/Src/main.c ****     // offset = getRotation();
 327:Core/Src/main.c ****     // dma_printf_puts("Offset: ");
 328:Core/Src/main.c ****     // dma_printf_puts(uint2char(offset));
 329:Core/Src/main.c ****     // dma_printf_puts("\r\n");
 330:Core/Src/main.c ****     // dma_printf_puts("Calibration End\r\n");
 331:Core/Src/main.c **** 
 332:Core/Src/main.c ****     offset = 2853;
 333:Core/Src/main.c **** 
 334:Core/Src/main.c ****     HAL_TIM_Base_Start_IT(&htim2);
 335:Core/Src/main.c **** 
 336:Core/Src/main.c ****     uint8_t ring_buf[2] = {0};
 337:Core/Src/main.c ****     ring_buf[0] = 0B01000000;
 338:Core/Src/main.c ****     ring_buf[1] = 0B11000000;
 339:Core/Src/main.c **** 
 340:Core/Src/main.c ****     HAL_UART_Receive_DMA(&huart1, ring_buf, 2);
 341:Core/Src/main.c **** 
ARM GAS  /var/folders/l2/71_2bdwd5hl5fnnvwg2sr4v80000gn/T//ccUkH8w1.s 			page 22


 342:Core/Src/main.c ****     ring_buf[0] = 0B01000000;
 343:Core/Src/main.c ****     ring_buf[1] = 0B11000000;
 344:Core/Src/main.c **** 
 345:Core/Src/main.c ****     while (!(ring_buf[0] == 0B11111111 && ring_buf[1] == 0B11111111)) {
 346:Core/Src/main.c ****         printf("waiting\t%d\t%d\n", ring_buf[0], ring_buf[1]);
 347:Core/Src/main.c ****     }
 348:Core/Src/main.c ****     ring_buf[0] = 0B01000000;
 349:Core/Src/main.c ****     ring_buf[1] = 0B11000000;
 350:Core/Src/main.c **** 
 351:Core/Src/main.c ****     printf("start\n");
 352:Core/Src/main.c **** 
 353:Core/Src/main.c ****     while (1) {
 354:Core/Src/main.c ****         /* USER CODE END WHILE */
 355:Core/Src/main.c **** 
 356:Core/Src/main.c ****         /* USER CODE BEGIN 3 */
 357:Core/Src/main.c **** 
 358:Core/Src/main.c ****         printf("ref,pwm,real:%d\t%d\t%d\n", velocity_ref, pwm, velocity);
 359:Core/Src/main.c **** 
 360:Core/Src/main.c ****         uint8_t index = 0;
 361:Core/Src/main.c ****         for (int i = 0; i < 2; i++) {
 362:Core/Src/main.c ****             if (ring_buf[i] >> 7 == id) {
 363:Core/Src/main.c ****                 index = i;
 364:Core/Src/main.c ****                 break;
 365:Core/Src/main.c ****             }
 366:Core/Src/main.c ****         }
 367:Core/Src/main.c **** 
 368:Core/Src/main.c ****         int8_t _ref = ((ring_buf[index] & 0x7F) << 1);
 369:Core/Src/main.c **** 
 370:Core/Src/main.c ****         if (_ref < -120) {
 371:Core/Src/main.c ****             isReleased = 1;
 372:Core/Src/main.c ****         } else {
 373:Core/Src/main.c ****             isReleased = 0;
 374:Core/Src/main.c ****         }
 375:Core/Src/main.c **** 
 376:Core/Src/main.c ****         velocity_ref = _ref * 2;
 377:Core/Src/main.c **** 
 378:Core/Src/main.c ****         // printf("%d\t%d\t%d\t%d\n", ring_buf[0], ring_buf[1], _ref,
 379:Core/Src/main.c ****         // velocity_ref); printf("%d\n", _ref);
 380:Core/Src/main.c ****     }
 381:Core/Src/main.c ****     /* USER CODE END 3 */
 382:Core/Src/main.c **** }
 383:Core/Src/main.c **** 
 384:Core/Src/main.c **** /**
 385:Core/Src/main.c ****  * @brief System Clock Configuration
 386:Core/Src/main.c ****  * @retval None
 387:Core/Src/main.c ****  */
 388:Core/Src/main.c **** void SystemClock_Config(void) {
 389:Core/Src/main.c ****     RCC_OscInitTypeDef RCC_OscInitStruct = {0};
 390:Core/Src/main.c ****     RCC_ClkInitTypeDef RCC_ClkInitStruct = {0};
 391:Core/Src/main.c ****     RCC_PeriphCLKInitTypeDef PeriphClkInit = {0};
 392:Core/Src/main.c **** 
 393:Core/Src/main.c ****     /** Initializes the RCC Oscillators according to the specified parameters
 394:Core/Src/main.c ****      * in the RCC_OscInitTypeDef structure.
 395:Core/Src/main.c ****      */
 396:Core/Src/main.c ****     RCC_OscInitStruct.OscillatorType = RCC_OSCILLATORTYPE_HSI;
 397:Core/Src/main.c ****     RCC_OscInitStruct.HSIState = RCC_HSI_ON;
 398:Core/Src/main.c ****     RCC_OscInitStruct.HSICalibrationValue = RCC_HSICALIBRATION_DEFAULT;
ARM GAS  /var/folders/l2/71_2bdwd5hl5fnnvwg2sr4v80000gn/T//ccUkH8w1.s 			page 23


 399:Core/Src/main.c ****     RCC_OscInitStruct.PLL.PLLState = RCC_PLL_ON;
 400:Core/Src/main.c ****     RCC_OscInitStruct.PLL.PLLSource = RCC_PLLSOURCE_HSI;
 401:Core/Src/main.c ****     RCC_OscInitStruct.PLL.PLLMUL = RCC_PLL_MUL8;
 402:Core/Src/main.c ****     if (HAL_RCC_OscConfig(&RCC_OscInitStruct) != HAL_OK) {
 403:Core/Src/main.c ****         Error_Handler();
 404:Core/Src/main.c ****     }
 405:Core/Src/main.c **** 
 406:Core/Src/main.c ****     /** Initializes the CPU, AHB and APB buses clocks
 407:Core/Src/main.c ****      */
 408:Core/Src/main.c ****     RCC_ClkInitStruct.ClockType = RCC_CLOCKTYPE_HCLK | RCC_CLOCKTYPE_SYSCLK |
 409:Core/Src/main.c ****                                   RCC_CLOCKTYPE_PCLK1 | RCC_CLOCKTYPE_PCLK2;
 410:Core/Src/main.c ****     RCC_ClkInitStruct.SYSCLKSource = RCC_SYSCLKSOURCE_PLLCLK;
 411:Core/Src/main.c ****     RCC_ClkInitStruct.AHBCLKDivider = RCC_SYSCLK_DIV1;
 412:Core/Src/main.c ****     RCC_ClkInitStruct.APB1CLKDivider = RCC_HCLK_DIV1;
 413:Core/Src/main.c ****     RCC_ClkInitStruct.APB2CLKDivider = RCC_HCLK_DIV1;
 414:Core/Src/main.c **** 
 415:Core/Src/main.c ****     if (HAL_RCC_ClockConfig(&RCC_ClkInitStruct, FLASH_LATENCY_1) != HAL_OK) {
 416:Core/Src/main.c ****         Error_Handler();
 417:Core/Src/main.c ****     }
 418:Core/Src/main.c ****     PeriphClkInit.PeriphClockSelection =
 419:Core/Src/main.c ****         RCC_PERIPHCLK_USART1 | RCC_PERIPHCLK_TIM1;
 420:Core/Src/main.c ****     PeriphClkInit.Usart1ClockSelection = RCC_USART1CLKSOURCE_PCLK1;
 421:Core/Src/main.c ****     PeriphClkInit.Tim1ClockSelection = RCC_TIM1CLK_HCLK;
 422:Core/Src/main.c ****     if (HAL_RCCEx_PeriphCLKConfig(&PeriphClkInit) != HAL_OK) {
 423:Core/Src/main.c ****         Error_Handler();
 424:Core/Src/main.c ****     }
 425:Core/Src/main.c **** }
 426:Core/Src/main.c **** 
 427:Core/Src/main.c **** /* USER CODE BEGIN 4 */
 428:Core/Src/main.c **** void HAL_UART_TxCpltCallback(UART_HandleTypeDef *huart) {
 855              		.loc 1 428 57 is_stmt 1 view -0
 856              		.cfi_startproc
 857              		@ args = 0, pretend = 0, frame = 0
 858              		@ frame_needed = 0, uses_anonymous_args = 0
 859              		.loc 1 428 57 is_stmt 0 view .LVU196
 860 0000 08B5     		push	{r3, lr}
 861              	.LCFI12:
 862              		.cfi_def_cfa_offset 8
 863              		.cfi_offset 3, -8
 864              		.cfi_offset 14, -4
 429:Core/Src/main.c ****     dma_printf_send_it(huart);
 865              		.loc 1 429 5 is_stmt 1 view .LVU197
 866 0002 FFF7FEFF 		bl	dma_printf_send_it
 867              	.LVL66:
 430:Core/Src/main.c **** }
 868              		.loc 1 430 1 is_stmt 0 view .LVU198
 869 0006 08BD     		pop	{r3, pc}
 870              		.cfi_endproc
 871              	.LFE136:
 873              		.section	.text.__io_putchar,"ax",%progbits
 874              		.align	1
 875              		.global	__io_putchar
 876              		.syntax unified
 877              		.thumb
 878              		.thumb_func
 880              	__io_putchar:
 881              	.LVL67:
ARM GAS  /var/folders/l2/71_2bdwd5hl5fnnvwg2sr4v80000gn/T//ccUkH8w1.s 			page 24


 882              	.LFB137:
 431:Core/Src/main.c **** int __io_putchar(int ch) {
 883              		.loc 1 431 26 is_stmt 1 view -0
 884              		.cfi_startproc
 885              		@ args = 0, pretend = 0, frame = 0
 886              		@ frame_needed = 0, uses_anonymous_args = 0
 887              		.loc 1 431 26 is_stmt 0 view .LVU200
 888 0000 10B5     		push	{r4, lr}
 889              	.LCFI13:
 890              		.cfi_def_cfa_offset 8
 891              		.cfi_offset 4, -8
 892              		.cfi_offset 14, -4
 893 0002 0446     		mov	r4, r0
 432:Core/Src/main.c ****     dma_printf_putc(ch & 0xFF);
 894              		.loc 1 432 5 is_stmt 1 view .LVU201
 895 0004 C0B2     		uxtb	r0, r0
 896              	.LVL68:
 897              		.loc 1 432 5 is_stmt 0 view .LVU202
 898 0006 FFF7FEFF 		bl	dma_printf_putc
 899              	.LVL69:
 433:Core/Src/main.c ****     return ch;
 900              		.loc 1 433 5 is_stmt 1 view .LVU203
 434:Core/Src/main.c **** }
 901              		.loc 1 434 1 is_stmt 0 view .LVU204
 902 000a 2046     		mov	r0, r4
 903 000c 10BD     		pop	{r4, pc}
 904              		.loc 1 434 1 view .LVU205
 905              		.cfi_endproc
 906              	.LFE137:
 908              		.section	.text.__io_getchar,"ax",%progbits
 909              		.align	1
 910              		.global	__io_getchar
 911              		.syntax unified
 912              		.thumb
 913              		.thumb_func
 915              	__io_getchar:
 916              	.LFB138:
 435:Core/Src/main.c **** 
 436:Core/Src/main.c **** int __io_getchar(void) {
 917              		.loc 1 436 24 is_stmt 1 view -0
 918              		.cfi_startproc
 919              		@ args = 0, pretend = 0, frame = 0
 920              		@ frame_needed = 0, uses_anonymous_args = 0
 921 0000 08B5     		push	{r3, lr}
 922              	.LCFI14:
 923              		.cfi_def_cfa_offset 8
 924              		.cfi_offset 3, -8
 925              		.cfi_offset 14, -4
 437:Core/Src/main.c ****     return dma_scanf_getc_blocking();
 926              		.loc 1 437 5 view .LVU207
 927              		.loc 1 437 12 is_stmt 0 view .LVU208
 928 0002 FFF7FEFF 		bl	dma_scanf_getc_blocking
 929              	.LVL70:
 438:Core/Src/main.c **** }
 930              		.loc 1 438 1 view .LVU209
 931 0006 08BD     		pop	{r3, pc}
 932              		.cfi_endproc
ARM GAS  /var/folders/l2/71_2bdwd5hl5fnnvwg2sr4v80000gn/T//ccUkH8w1.s 			page 25


 933              	.LFE138:
 935              		.section	.text.HAL_TIM_PeriodElapsedCallback,"ax",%progbits
 936              		.align	1
 937              		.global	HAL_TIM_PeriodElapsedCallback
 938              		.syntax unified
 939              		.thumb
 940              		.thumb_func
 942              	HAL_TIM_PeriodElapsedCallback:
 943              	.LVL71:
 944              	.LFB139:
 439:Core/Src/main.c **** 
 440:Core/Src/main.c **** void HAL_TIM_PeriodElapsedCallback(TIM_HandleTypeDef *htim) {
 945              		.loc 1 440 61 is_stmt 1 view -0
 946              		.cfi_startproc
 947              		@ args = 0, pretend = 0, frame = 0
 948              		@ frame_needed = 0, uses_anonymous_args = 0
 441:Core/Src/main.c ****     if (htim == &htim2) {
 949              		.loc 1 441 5 view .LVU211
 950              		.loc 1 441 8 is_stmt 0 view .LVU212
 951 0000 594B     		ldr	r3, .L53
 952 0002 8342     		cmp	r3, r0
 953 0004 00D0     		beq	.L51
 954 0006 7047     		bx	lr
 955              	.L51:
 440:Core/Src/main.c ****     if (htim == &htim2) {
 956              		.loc 1 440 61 view .LVU213
 957 0008 10B5     		push	{r4, lr}
 958              	.LCFI15:
 959              		.cfi_def_cfa_offset 8
 960              		.cfi_offset 4, -8
 961              		.cfi_offset 14, -4
 962              	.LBB6:
 442:Core/Src/main.c ****         short real_angle = getRotation() - offset;
 963              		.loc 1 442 9 is_stmt 1 view .LVU214
 964              		.loc 1 442 28 is_stmt 0 view .LVU215
 965 000a FFF7FEFF 		bl	getRotation
 966              	.LVL72:
 967              		.loc 1 442 28 view .LVU216
 968 000e 80B2     		uxth	r0, r0
 969              		.loc 1 442 42 view .LVU217
 970 0010 564B     		ldr	r3, .L53+4
 971 0012 1B68     		ldr	r3, [r3]
 972 0014 C01A     		subs	r0, r0, r3
 973 0016 80B2     		uxth	r0, r0
 974              	.LVL73:
 443:Core/Src/main.c ****         real_angle += 8192;
 975              		.loc 1 443 9 is_stmt 1 view .LVU218
 976              		.loc 1 443 20 is_stmt 0 view .LVU219
 977 0018 00F50050 		add	r0, r0, #8192
 978              	.LVL74:
 979              		.loc 1 443 20 view .LVU220
 980 001c 00B2     		sxth	r0, r0
 981              	.LVL75:
 444:Core/Src/main.c ****         real_angle %= 8192;
 982              		.loc 1 444 9 is_stmt 1 view .LVU221
 983              		.loc 1 444 20 is_stmt 0 view .LVU222
 984 001e 4342     		rsbs	r3, r0, #0
ARM GAS  /var/folders/l2/71_2bdwd5hl5fnnvwg2sr4v80000gn/T//ccUkH8w1.s 			page 26


 985 0020 C0F30C04 		ubfx	r4, r0, #0, #13
 986 0024 C3F30C03 		ubfx	r3, r3, #0, #13
 987 0028 58BF     		it	pl
 988 002a 5C42     		rsbpl	r4, r3, #0
 989              	.LVL76:
 445:Core/Src/main.c ****         uint16_t rotation = electrical_angle(real_angle);
 990              		.loc 1 445 9 is_stmt 1 view .LVU223
 991              		.loc 1 445 29 is_stmt 0 view .LVU224
 992 002c 2046     		mov	r0, r4
 993 002e FFF7FEFF 		bl	electrical_angle
 994              	.LVL77:
 446:Core/Src/main.c **** 
 447:Core/Src/main.c ****         static uint8_t count = 0;
 995              		.loc 1 447 9 is_stmt 1 view .LVU225
 448:Core/Src/main.c ****         if (32 / (pre_scaler + 1) == count) {
 996              		.loc 1 448 9 view .LVU226
 997              		.loc 1 448 35 is_stmt 0 view .LVU227
 998 0032 4F4B     		ldr	r3, .L53+8
 999 0034 1B78     		ldrb	r3, [r3]	@ zero_extendqisi2
 1000              		.loc 1 448 12 view .LVU228
 1001 0036 082B     		cmp	r3, #8
 1002 0038 5AD0     		beq	.L52
 1003              	.L37:
 449:Core/Src/main.c ****             count = 0;
 450:Core/Src/main.c **** 
 451:Core/Src/main.c ****             static short old_real_angle = 0;
 452:Core/Src/main.c **** 
 453:Core/Src/main.c ****             velocity = real_angle - old_real_angle;
 454:Core/Src/main.c ****             if (velocity > 4096) {
 455:Core/Src/main.c ****                 velocity -= 8192;
 456:Core/Src/main.c ****             } else if (velocity < -4096) {
 457:Core/Src/main.c ****                 velocity += 8192;
 458:Core/Src/main.c ****             }
 459:Core/Src/main.c **** 
 460:Core/Src/main.c ****             old_real_angle = real_angle;
 461:Core/Src/main.c ****         }
 462:Core/Src/main.c ****         count++;
 1004              		.loc 1 462 9 is_stmt 1 view .LVU229
 1005              		.loc 1 462 14 is_stmt 0 view .LVU230
 1006 003a 4D4A     		ldr	r2, .L53+8
 1007 003c 1378     		ldrb	r3, [r2]	@ zero_extendqisi2
 1008 003e 0133     		adds	r3, r3, #1
 1009 0040 1370     		strb	r3, [r2]
 463:Core/Src/main.c **** 
 464:Core/Src/main.c ****         static int32_t err_vel = 0;
 1010              		.loc 1 464 9 is_stmt 1 view .LVU231
 465:Core/Src/main.c ****         static int32_t int_err_vel = 0;
 1011              		.loc 1 465 9 view .LVU232
 466:Core/Src/main.c **** 
 467:Core/Src/main.c ****         int32_t err = velocity_ref - velocity;
 1012              		.loc 1 467 9 view .LVU233
 1013              		.loc 1 467 36 is_stmt 0 view .LVU234
 1014 0042 4C4B     		ldr	r3, .L53+12
 1015 0044 B3F90030 		ldrsh	r3, [r3]
 1016 0048 4B4A     		ldr	r2, .L53+16
 1017 004a B2F90020 		ldrsh	r2, [r2]
 1018              		.loc 1 467 17 view .LVU235
ARM GAS  /var/folders/l2/71_2bdwd5hl5fnnvwg2sr4v80000gn/T//ccUkH8w1.s 			page 27


 1019 004e 9B1A     		subs	r3, r3, r2
 1020              	.LVL78:
 468:Core/Src/main.c ****         int_err_vel += err;
 1021              		.loc 1 468 9 is_stmt 1 view .LVU236
 1022              		.loc 1 468 21 is_stmt 0 view .LVU237
 1023 0050 4A49     		ldr	r1, .L53+20
 1024 0052 0A68     		ldr	r2, [r1]
 1025 0054 1A44     		add	r2, r2, r3
 1026 0056 0A60     		str	r2, [r1]
 469:Core/Src/main.c **** 
 470:Core/Src/main.c ****         const float kp = 1.2;
 1027              		.loc 1 470 9 is_stmt 1 view .LVU238
 1028              	.LVL79:
 471:Core/Src/main.c ****         const float ki = 0.04;
 1029              		.loc 1 471 9 view .LVU239
 472:Core/Src/main.c **** 
 473:Core/Src/main.c ****         pwm = kp * err + ki * int_err_vel;
 1030              		.loc 1 473 9 view .LVU240
 1031              		.loc 1 473 18 is_stmt 0 view .LVU241
 1032 0058 07EE903A 		vmov	s15, r3	@ int
 1033 005c F8EEE77A 		vcvt.f32.s32	s15, s15
 1034 0060 9FED477A 		vldr.32	s14, .L53+24
 1035 0064 67EE877A 		vmul.f32	s15, s15, s14
 1036              		.loc 1 473 29 view .LVU242
 1037 0068 07EE102A 		vmov	s14, r2	@ int
 1038 006c B8EEC77A 		vcvt.f32.s32	s14, s14
 1039 0070 DFED446A 		vldr.32	s13, .L53+28
 1040 0074 27EE267A 		vmul.f32	s14, s14, s13
 1041              		.loc 1 473 24 view .LVU243
 1042 0078 77EE877A 		vadd.f32	s15, s15, s14
 1043              		.loc 1 473 13 view .LVU244
 1044 007c FDEEE77A 		vcvt.s32.f32	s15, s15
 1045 0080 17EE903A 		vmov	r3, s15	@ int
 1046              	.LVL80:
 1047              		.loc 1 473 13 view .LVU245
 1048 0084 1BB2     		sxth	r3, r3
 1049 0086 4049     		ldr	r1, .L53+32
 1050 0088 0B80     		strh	r3, [r1]	@ movhi
 474:Core/Src/main.c **** 
 475:Core/Src/main.c ****         const int max_int_err_vel = 7000;
 1051              		.loc 1 475 9 is_stmt 1 view .LVU246
 1052              	.LVL81:
 476:Core/Src/main.c ****         if (int_err_vel > max_int_err_vel) {
 1053              		.loc 1 476 9 view .LVU247
 1054              		.loc 1 476 12 is_stmt 0 view .LVU248
 1055 008a 41F65831 		movw	r1, #7000
 1056 008e 8A42     		cmp	r2, r1
 1057 0090 49DD     		ble	.L40
 477:Core/Src/main.c ****             int_err_vel = max_int_err_vel;
 1058              		.loc 1 477 13 is_stmt 1 view .LVU249
 1059              		.loc 1 477 25 is_stmt 0 view .LVU250
 1060 0092 3A4A     		ldr	r2, .L53+20
 1061 0094 1160     		str	r1, [r2]
 1062              	.L41:
 478:Core/Src/main.c ****         } else if (int_err_vel < -max_int_err_vel) {
 479:Core/Src/main.c ****             int_err_vel = -max_int_err_vel;
 480:Core/Src/main.c ****         }
ARM GAS  /var/folders/l2/71_2bdwd5hl5fnnvwg2sr4v80000gn/T//ccUkH8w1.s 			page 28


 481:Core/Src/main.c **** 
 482:Core/Src/main.c ****         const int max_pwm = 320;
 1063              		.loc 1 482 9 is_stmt 1 view .LVU251
 1064              	.LVL82:
 483:Core/Src/main.c ****         if (pwm > max_pwm) {
 1065              		.loc 1 483 9 view .LVU252
 1066              		.loc 1 483 12 is_stmt 0 view .LVU253
 1067 0096 B3F5A07F 		cmp	r3, #320
 1068 009a 4ADD     		ble	.L42
 484:Core/Src/main.c ****             pwm = max_pwm;
 1069              		.loc 1 484 13 is_stmt 1 view .LVU254
 1070              		.loc 1 484 17 is_stmt 0 view .LVU255
 1071 009c 3A4B     		ldr	r3, .L53+32
 1072 009e 4FF4A072 		mov	r2, #320
 1073 00a2 1A80     		strh	r2, [r3]	@ movhi
 1074              	.L43:
 485:Core/Src/main.c ****         } else if (pwm < -max_pwm) {
 486:Core/Src/main.c ****             pwm = -max_pwm;
 487:Core/Src/main.c ****         }
 488:Core/Src/main.c **** 
 489:Core/Src/main.c ****         if (pwm < 10 && pwm > -10) {
 1075              		.loc 1 489 9 is_stmt 1 view .LVU256
 1076              		.loc 1 489 22 is_stmt 0 view .LVU257
 1077 00a4 384B     		ldr	r3, .L53+32
 1078 00a6 1B88     		ldrh	r3, [r3]
 1079 00a8 0933     		adds	r3, r3, #9
 1080 00aa 9BB2     		uxth	r3, r3
 1081              		.loc 1 489 12 view .LVU258
 1082 00ac 122B     		cmp	r3, #18
 1083 00ae 02D8     		bhi	.L44
 490:Core/Src/main.c ****             pwm = 0;
 1084              		.loc 1 490 13 is_stmt 1 view .LVU259
 1085              		.loc 1 490 17 is_stmt 0 view .LVU260
 1086 00b0 354B     		ldr	r3, .L53+32
 1087 00b2 0022     		movs	r2, #0
 1088 00b4 1A80     		strh	r2, [r3]	@ movhi
 1089              	.L44:
 491:Core/Src/main.c ****         }
 492:Core/Src/main.c **** 
 493:Core/Src/main.c ****         if (isReleased) {
 1090              		.loc 1 493 9 is_stmt 1 view .LVU261
 1091              		.loc 1 493 13 is_stmt 0 view .LVU262
 1092 00b6 354B     		ldr	r3, .L53+36
 1093 00b8 1B78     		ldrb	r3, [r3]	@ zero_extendqisi2
 1094              		.loc 1 493 12 view .LVU263
 1095 00ba 13B1     		cbz	r3, .L45
 494:Core/Src/main.c ****             pwm = 0;
 1096              		.loc 1 494 13 is_stmt 1 view .LVU264
 1097              		.loc 1 494 17 is_stmt 0 view .LVU265
 1098 00bc 324B     		ldr	r3, .L53+32
 1099 00be 0022     		movs	r2, #0
 1100 00c0 1A80     		strh	r2, [r3]	@ movhi
 1101              	.L45:
 495:Core/Src/main.c ****         }
 496:Core/Src/main.c **** 
 497:Core/Src/main.c ****         if (pwm > 0) {
 1102              		.loc 1 497 9 is_stmt 1 view .LVU266
ARM GAS  /var/folders/l2/71_2bdwd5hl5fnnvwg2sr4v80000gn/T//ccUkH8w1.s 			page 29


 1103              		.loc 1 497 17 is_stmt 0 view .LVU267
 1104 00c2 314B     		ldr	r3, .L53+32
 1105 00c4 B3F90010 		ldrsh	r1, [r3]
 1106              		.loc 1 497 12 view .LVU268
 1107 00c8 0029     		cmp	r1, #0
 1108 00ca 3ADD     		ble	.L46
 498:Core/Src/main.c ****             setPhase((rotation + 292) % 1170, pwm);
 1109              		.loc 1 498 13 is_stmt 1 view .LVU269
 1110              		.loc 1 498 32 is_stmt 0 view .LVU270
 1111 00cc 00F59270 		add	r0, r0, #292
 1112              	.LVL83:
 1113              		.loc 1 498 39 view .LVU271
 1114 00d0 2F4A     		ldr	r2, .L53+40
 1115 00d2 82FB0032 		smull	r3, r2, r2, r0
 1116 00d6 0244     		add	r2, r2, r0
 1117 00d8 C317     		asrs	r3, r0, #31
 1118 00da C3EBA223 		rsb	r3, r3, r2, asr #10
 1119 00de 40F29242 		movw	r2, #1170
 1120 00e2 02FB1303 		mls	r3, r2, r3, r0
 1121              		.loc 1 498 13 view .LVU272
 1122 00e6 89B2     		uxth	r1, r1
 1123 00e8 98B2     		uxth	r0, r3
 1124 00ea FFF7FEFF 		bl	setPhase
 1125              	.LVL84:
 1126              	.L35:
 1127              		.loc 1 498 13 view .LVU273
 1128              	.LBE6:
 499:Core/Src/main.c ****         } else {
 500:Core/Src/main.c ****             setPhase((rotation + 877) % 1170, -pwm);
 501:Core/Src/main.c ****         }
 502:Core/Src/main.c ****     }
 503:Core/Src/main.c **** }
 1129              		.loc 1 503 1 view .LVU274
 1130 00ee 10BD     		pop	{r4, pc}
 1131              	.LVL85:
 1132              	.L52:
 1133              	.LBB8:
 1134              	.LBB7:
 449:Core/Src/main.c **** 
 1135              		.loc 1 449 13 is_stmt 1 view .LVU275
 449:Core/Src/main.c **** 
 1136              		.loc 1 449 19 is_stmt 0 view .LVU276
 1137 00f0 1F4B     		ldr	r3, .L53+8
 1138 00f2 0022     		movs	r2, #0
 1139 00f4 1A70     		strb	r2, [r3]
 451:Core/Src/main.c **** 
 1140              		.loc 1 451 13 is_stmt 1 view .LVU277
 453:Core/Src/main.c ****             if (velocity > 4096) {
 1141              		.loc 1 453 13 view .LVU278
 453:Core/Src/main.c ****             if (velocity > 4096) {
 1142              		.loc 1 453 35 is_stmt 0 view .LVU279
 1143 00f6 274B     		ldr	r3, .L53+44
 1144 00f8 1B88     		ldrh	r3, [r3]
 1145 00fa E31A     		subs	r3, r4, r3
 1146 00fc 9AB2     		uxth	r2, r3
 1147 00fe 1BB2     		sxth	r3, r3
 453:Core/Src/main.c ****             if (velocity > 4096) {
ARM GAS  /var/folders/l2/71_2bdwd5hl5fnnvwg2sr4v80000gn/T//ccUkH8w1.s 			page 30


 1148              		.loc 1 453 22 view .LVU280
 1149 0100 1D49     		ldr	r1, .L53+16
 1150 0102 0B80     		strh	r3, [r1]	@ movhi
 454:Core/Src/main.c ****                 velocity -= 8192;
 1151              		.loc 1 454 13 is_stmt 1 view .LVU281
 454:Core/Src/main.c ****                 velocity -= 8192;
 1152              		.loc 1 454 16 is_stmt 0 view .LVU282
 1153 0104 B3F5805F 		cmp	r3, #4096
 1154 0108 05DD     		ble	.L38
 455:Core/Src/main.c ****             } else if (velocity < -4096) {
 1155              		.loc 1 455 17 is_stmt 1 view .LVU283
 455:Core/Src/main.c ****             } else if (velocity < -4096) {
 1156              		.loc 1 455 26 is_stmt 0 view .LVU284
 1157 010a A2F50052 		sub	r2, r2, #8192
 1158 010e 0A80     		strh	r2, [r1]	@ movhi
 1159              	.L39:
 460:Core/Src/main.c ****         }
 1160              		.loc 1 460 13 is_stmt 1 view .LVU285
 460:Core/Src/main.c ****         }
 1161              		.loc 1 460 28 is_stmt 0 view .LVU286
 1162 0110 204B     		ldr	r3, .L53+44
 1163 0112 1C80     		strh	r4, [r3]	@ movhi
 1164 0114 91E7     		b	.L37
 1165              	.L38:
 456:Core/Src/main.c ****                 velocity += 8192;
 1166              		.loc 1 456 20 is_stmt 1 view .LVU287
 456:Core/Src/main.c ****                 velocity += 8192;
 1167              		.loc 1 456 23 is_stmt 0 view .LVU288
 1168 0116 13F5805F 		cmn	r3, #4096
 1169 011a F9DA     		bge	.L39
 457:Core/Src/main.c ****             }
 1170              		.loc 1 457 17 is_stmt 1 view .LVU289
 457:Core/Src/main.c ****             }
 1171              		.loc 1 457 26 is_stmt 0 view .LVU290
 1172 011c 02F50052 		add	r2, r2, #8192
 1173 0120 154B     		ldr	r3, .L53+16
 1174 0122 1A80     		strh	r2, [r3]	@ movhi
 1175 0124 F4E7     		b	.L39
 1176              	.LVL86:
 1177              	.L40:
 457:Core/Src/main.c ****             }
 1178              		.loc 1 457 26 view .LVU291
 1179              	.LBE7:
 478:Core/Src/main.c ****             int_err_vel = -max_int_err_vel;
 1180              		.loc 1 478 16 is_stmt 1 view .LVU292
 478:Core/Src/main.c ****             int_err_vel = -max_int_err_vel;
 1181              		.loc 1 478 19 is_stmt 0 view .LVU293
 1182 0126 1C49     		ldr	r1, .L53+48
 1183 0128 8A42     		cmp	r2, r1
 1184 012a B4DA     		bge	.L41
 479:Core/Src/main.c ****         }
 1185              		.loc 1 479 13 is_stmt 1 view .LVU294
 479:Core/Src/main.c ****         }
 1186              		.loc 1 479 25 is_stmt 0 view .LVU295
 1187 012c 134A     		ldr	r2, .L53+20
 1188 012e 1160     		str	r1, [r2]
 1189 0130 B1E7     		b	.L41
ARM GAS  /var/folders/l2/71_2bdwd5hl5fnnvwg2sr4v80000gn/T//ccUkH8w1.s 			page 31


 1190              	.LVL87:
 1191              	.L42:
 485:Core/Src/main.c ****             pwm = -max_pwm;
 1192              		.loc 1 485 16 is_stmt 1 view .LVU296
 485:Core/Src/main.c ****             pwm = -max_pwm;
 1193              		.loc 1 485 19 is_stmt 0 view .LVU297
 1194 0132 13F5A07F 		cmn	r3, #320
 1195 0136 B5DA     		bge	.L43
 486:Core/Src/main.c ****         }
 1196              		.loc 1 486 13 is_stmt 1 view .LVU298
 486:Core/Src/main.c ****         }
 1197              		.loc 1 486 17 is_stmt 0 view .LVU299
 1198 0138 134B     		ldr	r3, .L53+32
 1199 013a 4FF6C062 		movw	r2, #65216
 1200 013e 1A80     		strh	r2, [r3]	@ movhi
 1201 0140 B0E7     		b	.L43
 1202              	.L46:
 500:Core/Src/main.c ****         }
 1203              		.loc 1 500 13 is_stmt 1 view .LVU300
 500:Core/Src/main.c ****         }
 1204              		.loc 1 500 32 is_stmt 0 view .LVU301
 1205 0142 00F26D30 		addw	r0, r0, #877
 1206              	.LVL88:
 500:Core/Src/main.c ****         }
 1207              		.loc 1 500 39 view .LVU302
 1208 0146 124A     		ldr	r2, .L53+40
 1209 0148 82FB0032 		smull	r3, r2, r2, r0
 1210 014c 0244     		add	r2, r2, r0
 1211 014e C317     		asrs	r3, r0, #31
 1212 0150 C3EBA223 		rsb	r3, r3, r2, asr #10
 1213 0154 40F29242 		movw	r2, #1170
 1214 0158 02FB1303 		mls	r3, r2, r3, r0
 500:Core/Src/main.c ****         }
 1215              		.loc 1 500 13 view .LVU303
 1216 015c 4942     		rsbs	r1, r1, #0
 1217 015e 89B2     		uxth	r1, r1
 1218 0160 98B2     		uxth	r0, r3
 1219 0162 FFF7FEFF 		bl	setPhase
 1220              	.LVL89:
 500:Core/Src/main.c ****         }
 1221              		.loc 1 500 13 view .LVU304
 1222              	.LBE8:
 1223              		.loc 1 503 1 view .LVU305
 1224 0166 C2E7     		b	.L35
 1225              	.L54:
 1226              		.align	2
 1227              	.L53:
 1228 0168 00000000 		.word	htim2
 1229 016c 00000000 		.word	offset
 1230 0170 00000000 		.word	count.2
 1231 0174 00000000 		.word	velocity_ref
 1232 0178 00000000 		.word	velocity
 1233 017c 00000000 		.word	int_err_vel.0
 1234 0180 9A99993F 		.word	1067030938
 1235 0184 0AD7233D 		.word	1025758986
 1236 0188 00000000 		.word	pwm
 1237 018c 00000000 		.word	isReleased
ARM GAS  /var/folders/l2/71_2bdwd5hl5fnnvwg2sr4v80000gn/T//ccUkH8w1.s 			page 32


 1238 0190 E1000EE0 		.word	-535953183
 1239 0194 00000000 		.word	old_real_angle.1
 1240 0198 A8E4FFFF 		.word	-7000
 1241              		.cfi_endproc
 1242              	.LFE139:
 1244              		.section	.text.Error_Handler,"ax",%progbits
 1245              		.align	1
 1246              		.global	Error_Handler
 1247              		.syntax unified
 1248              		.thumb
 1249              		.thumb_func
 1251              	Error_Handler:
 1252              	.LFB140:
 504:Core/Src/main.c **** 
 505:Core/Src/main.c **** /* USER CODE END 4 */
 506:Core/Src/main.c **** 
 507:Core/Src/main.c **** /**
 508:Core/Src/main.c ****  * @brief  This function is executed in case of error occurrence.
 509:Core/Src/main.c ****  * @retval None
 510:Core/Src/main.c ****  */
 511:Core/Src/main.c **** void Error_Handler(void) {
 1253              		.loc 1 511 26 is_stmt 1 view -0
 1254              		.cfi_startproc
 1255              		@ Volatile: function does not return.
 1256              		@ args = 0, pretend = 0, frame = 0
 1257              		@ frame_needed = 0, uses_anonymous_args = 0
 1258              		@ link register save eliminated.
 512:Core/Src/main.c ****     /* USER CODE BEGIN Error_Handler_Debug */
 513:Core/Src/main.c ****     /* User can add his own implementation to report the HAL error return state
 514:Core/Src/main.c ****      */
 515:Core/Src/main.c ****     __disable_irq();
 1259              		.loc 1 515 5 view .LVU307
 1260              	.LBB9:
 1261              	.LBI9:
 1262              		.file 2 "Drivers/CMSIS/Include/cmsis_gcc.h"
   1:Drivers/CMSIS/Include/cmsis_gcc.h **** /**************************************************************************//**
   2:Drivers/CMSIS/Include/cmsis_gcc.h ****  * @file     cmsis_gcc.h
   3:Drivers/CMSIS/Include/cmsis_gcc.h ****  * @brief    CMSIS compiler GCC header file
   4:Drivers/CMSIS/Include/cmsis_gcc.h ****  * @version  V5.0.4
   5:Drivers/CMSIS/Include/cmsis_gcc.h ****  * @date     09. April 2018
   6:Drivers/CMSIS/Include/cmsis_gcc.h ****  ******************************************************************************/
   7:Drivers/CMSIS/Include/cmsis_gcc.h **** /*
   8:Drivers/CMSIS/Include/cmsis_gcc.h ****  * Copyright (c) 2009-2018 Arm Limited. All rights reserved.
   9:Drivers/CMSIS/Include/cmsis_gcc.h ****  *
  10:Drivers/CMSIS/Include/cmsis_gcc.h ****  * SPDX-License-Identifier: Apache-2.0
  11:Drivers/CMSIS/Include/cmsis_gcc.h ****  *
  12:Drivers/CMSIS/Include/cmsis_gcc.h ****  * Licensed under the Apache License, Version 2.0 (the License); you may
  13:Drivers/CMSIS/Include/cmsis_gcc.h ****  * not use this file except in compliance with the License.
  14:Drivers/CMSIS/Include/cmsis_gcc.h ****  * You may obtain a copy of the License at
  15:Drivers/CMSIS/Include/cmsis_gcc.h ****  *
  16:Drivers/CMSIS/Include/cmsis_gcc.h ****  * www.apache.org/licenses/LICENSE-2.0
  17:Drivers/CMSIS/Include/cmsis_gcc.h ****  *
  18:Drivers/CMSIS/Include/cmsis_gcc.h ****  * Unless required by applicable law or agreed to in writing, software
  19:Drivers/CMSIS/Include/cmsis_gcc.h ****  * distributed under the License is distributed on an AS IS BASIS, WITHOUT
  20:Drivers/CMSIS/Include/cmsis_gcc.h ****  * WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
  21:Drivers/CMSIS/Include/cmsis_gcc.h ****  * See the License for the specific language governing permissions and
  22:Drivers/CMSIS/Include/cmsis_gcc.h ****  * limitations under the License.
ARM GAS  /var/folders/l2/71_2bdwd5hl5fnnvwg2sr4v80000gn/T//ccUkH8w1.s 			page 33


  23:Drivers/CMSIS/Include/cmsis_gcc.h ****  */
  24:Drivers/CMSIS/Include/cmsis_gcc.h **** 
  25:Drivers/CMSIS/Include/cmsis_gcc.h **** #ifndef __CMSIS_GCC_H
  26:Drivers/CMSIS/Include/cmsis_gcc.h **** #define __CMSIS_GCC_H
  27:Drivers/CMSIS/Include/cmsis_gcc.h **** 
  28:Drivers/CMSIS/Include/cmsis_gcc.h **** /* ignore some GCC warnings */
  29:Drivers/CMSIS/Include/cmsis_gcc.h **** #pragma GCC diagnostic push
  30:Drivers/CMSIS/Include/cmsis_gcc.h **** #pragma GCC diagnostic ignored "-Wsign-conversion"
  31:Drivers/CMSIS/Include/cmsis_gcc.h **** #pragma GCC diagnostic ignored "-Wconversion"
  32:Drivers/CMSIS/Include/cmsis_gcc.h **** #pragma GCC diagnostic ignored "-Wunused-parameter"
  33:Drivers/CMSIS/Include/cmsis_gcc.h **** 
  34:Drivers/CMSIS/Include/cmsis_gcc.h **** /* Fallback for __has_builtin */
  35:Drivers/CMSIS/Include/cmsis_gcc.h **** #ifndef __has_builtin
  36:Drivers/CMSIS/Include/cmsis_gcc.h ****   #define __has_builtin(x) (0)
  37:Drivers/CMSIS/Include/cmsis_gcc.h **** #endif
  38:Drivers/CMSIS/Include/cmsis_gcc.h **** 
  39:Drivers/CMSIS/Include/cmsis_gcc.h **** /* CMSIS compiler specific defines */
  40:Drivers/CMSIS/Include/cmsis_gcc.h **** #ifndef   __ASM
  41:Drivers/CMSIS/Include/cmsis_gcc.h ****   #define __ASM                                  __asm
  42:Drivers/CMSIS/Include/cmsis_gcc.h **** #endif
  43:Drivers/CMSIS/Include/cmsis_gcc.h **** #ifndef   __INLINE
  44:Drivers/CMSIS/Include/cmsis_gcc.h ****   #define __INLINE                               inline
  45:Drivers/CMSIS/Include/cmsis_gcc.h **** #endif
  46:Drivers/CMSIS/Include/cmsis_gcc.h **** #ifndef   __STATIC_INLINE
  47:Drivers/CMSIS/Include/cmsis_gcc.h ****   #define __STATIC_INLINE                        static inline
  48:Drivers/CMSIS/Include/cmsis_gcc.h **** #endif
  49:Drivers/CMSIS/Include/cmsis_gcc.h **** #ifndef   __STATIC_FORCEINLINE                 
  50:Drivers/CMSIS/Include/cmsis_gcc.h ****   #define __STATIC_FORCEINLINE                   __attribute__((always_inline)) static inline
  51:Drivers/CMSIS/Include/cmsis_gcc.h **** #endif                                           
  52:Drivers/CMSIS/Include/cmsis_gcc.h **** #ifndef   __NO_RETURN
  53:Drivers/CMSIS/Include/cmsis_gcc.h ****   #define __NO_RETURN                            __attribute__((__noreturn__))
  54:Drivers/CMSIS/Include/cmsis_gcc.h **** #endif
  55:Drivers/CMSIS/Include/cmsis_gcc.h **** #ifndef   __USED
  56:Drivers/CMSIS/Include/cmsis_gcc.h ****   #define __USED                                 __attribute__((used))
  57:Drivers/CMSIS/Include/cmsis_gcc.h **** #endif
  58:Drivers/CMSIS/Include/cmsis_gcc.h **** #ifndef   __WEAK
  59:Drivers/CMSIS/Include/cmsis_gcc.h ****   #define __WEAK                                 __attribute__((weak))
  60:Drivers/CMSIS/Include/cmsis_gcc.h **** #endif
  61:Drivers/CMSIS/Include/cmsis_gcc.h **** #ifndef   __PACKED
  62:Drivers/CMSIS/Include/cmsis_gcc.h ****   #define __PACKED                               __attribute__((packed, aligned(1)))
  63:Drivers/CMSIS/Include/cmsis_gcc.h **** #endif
  64:Drivers/CMSIS/Include/cmsis_gcc.h **** #ifndef   __PACKED_STRUCT
  65:Drivers/CMSIS/Include/cmsis_gcc.h ****   #define __PACKED_STRUCT                        struct __attribute__((packed, aligned(1)))
  66:Drivers/CMSIS/Include/cmsis_gcc.h **** #endif
  67:Drivers/CMSIS/Include/cmsis_gcc.h **** #ifndef   __PACKED_UNION
  68:Drivers/CMSIS/Include/cmsis_gcc.h ****   #define __PACKED_UNION                         union __attribute__((packed, aligned(1)))
  69:Drivers/CMSIS/Include/cmsis_gcc.h **** #endif
  70:Drivers/CMSIS/Include/cmsis_gcc.h **** #ifndef   __UNALIGNED_UINT32        /* deprecated */
  71:Drivers/CMSIS/Include/cmsis_gcc.h ****   #pragma GCC diagnostic push
  72:Drivers/CMSIS/Include/cmsis_gcc.h ****   #pragma GCC diagnostic ignored "-Wpacked"
  73:Drivers/CMSIS/Include/cmsis_gcc.h ****   #pragma GCC diagnostic ignored "-Wattributes"
  74:Drivers/CMSIS/Include/cmsis_gcc.h ****   struct __attribute__((packed)) T_UINT32 { uint32_t v; };
  75:Drivers/CMSIS/Include/cmsis_gcc.h ****   #pragma GCC diagnostic pop
  76:Drivers/CMSIS/Include/cmsis_gcc.h ****   #define __UNALIGNED_UINT32(x)                  (((struct T_UINT32 *)(x))->v)
  77:Drivers/CMSIS/Include/cmsis_gcc.h **** #endif
  78:Drivers/CMSIS/Include/cmsis_gcc.h **** #ifndef   __UNALIGNED_UINT16_WRITE
  79:Drivers/CMSIS/Include/cmsis_gcc.h ****   #pragma GCC diagnostic push
ARM GAS  /var/folders/l2/71_2bdwd5hl5fnnvwg2sr4v80000gn/T//ccUkH8w1.s 			page 34


  80:Drivers/CMSIS/Include/cmsis_gcc.h ****   #pragma GCC diagnostic ignored "-Wpacked"
  81:Drivers/CMSIS/Include/cmsis_gcc.h ****   #pragma GCC diagnostic ignored "-Wattributes"
  82:Drivers/CMSIS/Include/cmsis_gcc.h ****   __PACKED_STRUCT T_UINT16_WRITE { uint16_t v; };
  83:Drivers/CMSIS/Include/cmsis_gcc.h ****   #pragma GCC diagnostic pop
  84:Drivers/CMSIS/Include/cmsis_gcc.h ****   #define __UNALIGNED_UINT16_WRITE(addr, val)    (void)((((struct T_UINT16_WRITE *)(void *)(addr))-
  85:Drivers/CMSIS/Include/cmsis_gcc.h **** #endif
  86:Drivers/CMSIS/Include/cmsis_gcc.h **** #ifndef   __UNALIGNED_UINT16_READ
  87:Drivers/CMSIS/Include/cmsis_gcc.h ****   #pragma GCC diagnostic push
  88:Drivers/CMSIS/Include/cmsis_gcc.h ****   #pragma GCC diagnostic ignored "-Wpacked"
  89:Drivers/CMSIS/Include/cmsis_gcc.h ****   #pragma GCC diagnostic ignored "-Wattributes"
  90:Drivers/CMSIS/Include/cmsis_gcc.h ****   __PACKED_STRUCT T_UINT16_READ { uint16_t v; };
  91:Drivers/CMSIS/Include/cmsis_gcc.h ****   #pragma GCC diagnostic pop
  92:Drivers/CMSIS/Include/cmsis_gcc.h ****   #define __UNALIGNED_UINT16_READ(addr)          (((const struct T_UINT16_READ *)(const void *)(add
  93:Drivers/CMSIS/Include/cmsis_gcc.h **** #endif
  94:Drivers/CMSIS/Include/cmsis_gcc.h **** #ifndef   __UNALIGNED_UINT32_WRITE
  95:Drivers/CMSIS/Include/cmsis_gcc.h ****   #pragma GCC diagnostic push
  96:Drivers/CMSIS/Include/cmsis_gcc.h ****   #pragma GCC diagnostic ignored "-Wpacked"
  97:Drivers/CMSIS/Include/cmsis_gcc.h ****   #pragma GCC diagnostic ignored "-Wattributes"
  98:Drivers/CMSIS/Include/cmsis_gcc.h ****   __PACKED_STRUCT T_UINT32_WRITE { uint32_t v; };
  99:Drivers/CMSIS/Include/cmsis_gcc.h ****   #pragma GCC diagnostic pop
 100:Drivers/CMSIS/Include/cmsis_gcc.h ****   #define __UNALIGNED_UINT32_WRITE(addr, val)    (void)((((struct T_UINT32_WRITE *)(void *)(addr))-
 101:Drivers/CMSIS/Include/cmsis_gcc.h **** #endif
 102:Drivers/CMSIS/Include/cmsis_gcc.h **** #ifndef   __UNALIGNED_UINT32_READ
 103:Drivers/CMSIS/Include/cmsis_gcc.h ****   #pragma GCC diagnostic push
 104:Drivers/CMSIS/Include/cmsis_gcc.h ****   #pragma GCC diagnostic ignored "-Wpacked"
 105:Drivers/CMSIS/Include/cmsis_gcc.h ****   #pragma GCC diagnostic ignored "-Wattributes"
 106:Drivers/CMSIS/Include/cmsis_gcc.h ****   __PACKED_STRUCT T_UINT32_READ { uint32_t v; };
 107:Drivers/CMSIS/Include/cmsis_gcc.h ****   #pragma GCC diagnostic pop
 108:Drivers/CMSIS/Include/cmsis_gcc.h ****   #define __UNALIGNED_UINT32_READ(addr)          (((const struct T_UINT32_READ *)(const void *)(add
 109:Drivers/CMSIS/Include/cmsis_gcc.h **** #endif
 110:Drivers/CMSIS/Include/cmsis_gcc.h **** #ifndef   __ALIGNED
 111:Drivers/CMSIS/Include/cmsis_gcc.h ****   #define __ALIGNED(x)                           __attribute__((aligned(x)))
 112:Drivers/CMSIS/Include/cmsis_gcc.h **** #endif
 113:Drivers/CMSIS/Include/cmsis_gcc.h **** #ifndef   __RESTRICT
 114:Drivers/CMSIS/Include/cmsis_gcc.h ****   #define __RESTRICT                             __restrict
 115:Drivers/CMSIS/Include/cmsis_gcc.h **** #endif
 116:Drivers/CMSIS/Include/cmsis_gcc.h **** 
 117:Drivers/CMSIS/Include/cmsis_gcc.h **** 
 118:Drivers/CMSIS/Include/cmsis_gcc.h **** /* ###########################  Core Function Access  ########################### */
 119:Drivers/CMSIS/Include/cmsis_gcc.h **** /** \ingroup  CMSIS_Core_FunctionInterface
 120:Drivers/CMSIS/Include/cmsis_gcc.h ****     \defgroup CMSIS_Core_RegAccFunctions CMSIS Core Register Access Functions
 121:Drivers/CMSIS/Include/cmsis_gcc.h ****   @{
 122:Drivers/CMSIS/Include/cmsis_gcc.h ****  */
 123:Drivers/CMSIS/Include/cmsis_gcc.h **** 
 124:Drivers/CMSIS/Include/cmsis_gcc.h **** /**
 125:Drivers/CMSIS/Include/cmsis_gcc.h ****   \brief   Enable IRQ Interrupts
 126:Drivers/CMSIS/Include/cmsis_gcc.h ****   \details Enables IRQ interrupts by clearing the I-bit in the CPSR.
 127:Drivers/CMSIS/Include/cmsis_gcc.h ****            Can only be executed in Privileged modes.
 128:Drivers/CMSIS/Include/cmsis_gcc.h ****  */
 129:Drivers/CMSIS/Include/cmsis_gcc.h **** __STATIC_FORCEINLINE void __enable_irq(void)
 130:Drivers/CMSIS/Include/cmsis_gcc.h **** {
 131:Drivers/CMSIS/Include/cmsis_gcc.h ****   __ASM volatile ("cpsie i" : : : "memory");
 132:Drivers/CMSIS/Include/cmsis_gcc.h **** }
 133:Drivers/CMSIS/Include/cmsis_gcc.h **** 
 134:Drivers/CMSIS/Include/cmsis_gcc.h **** 
 135:Drivers/CMSIS/Include/cmsis_gcc.h **** /**
 136:Drivers/CMSIS/Include/cmsis_gcc.h ****   \brief   Disable IRQ Interrupts
ARM GAS  /var/folders/l2/71_2bdwd5hl5fnnvwg2sr4v80000gn/T//ccUkH8w1.s 			page 35


 137:Drivers/CMSIS/Include/cmsis_gcc.h ****   \details Disables IRQ interrupts by setting the I-bit in the CPSR.
 138:Drivers/CMSIS/Include/cmsis_gcc.h ****            Can only be executed in Privileged modes.
 139:Drivers/CMSIS/Include/cmsis_gcc.h ****  */
 140:Drivers/CMSIS/Include/cmsis_gcc.h **** __STATIC_FORCEINLINE void __disable_irq(void)
 1263              		.loc 2 140 27 view .LVU308
 1264              	.LBB10:
 141:Drivers/CMSIS/Include/cmsis_gcc.h **** {
 142:Drivers/CMSIS/Include/cmsis_gcc.h ****   __ASM volatile ("cpsid i" : : : "memory");
 1265              		.loc 2 142 3 view .LVU309
 1266              		.syntax unified
 1267              	@ 142 "Drivers/CMSIS/Include/cmsis_gcc.h" 1
 1268 0000 72B6     		cpsid i
 1269              	@ 0 "" 2
 1270              		.thumb
 1271              		.syntax unified
 1272              	.L56:
 1273              	.LBE10:
 1274              	.LBE9:
 516:Core/Src/main.c ****     while (1) {
 1275              		.loc 1 516 5 discriminator 1 view .LVU310
 517:Core/Src/main.c ****     }
 1276              		.loc 1 517 5 discriminator 1 view .LVU311
 516:Core/Src/main.c ****     while (1) {
 1277              		.loc 1 516 11 discriminator 1 view .LVU312
 1278 0002 FEE7     		b	.L56
 1279              		.cfi_endproc
 1280              	.LFE140:
 1282              		.section	.text.SystemClock_Config,"ax",%progbits
 1283              		.align	1
 1284              		.global	SystemClock_Config
 1285              		.syntax unified
 1286              		.thumb
 1287              		.thumb_func
 1289              	SystemClock_Config:
 1290              	.LFB135:
 388:Core/Src/main.c ****     RCC_OscInitTypeDef RCC_OscInitStruct = {0};
 1291              		.loc 1 388 31 view -0
 1292              		.cfi_startproc
 1293              		@ args = 0, pretend = 0, frame = 88
 1294              		@ frame_needed = 0, uses_anonymous_args = 0
 1295 0000 00B5     		push	{lr}
 1296              	.LCFI16:
 1297              		.cfi_def_cfa_offset 4
 1298              		.cfi_offset 14, -4
 1299 0002 97B0     		sub	sp, sp, #92
 1300              	.LCFI17:
 1301              		.cfi_def_cfa_offset 96
 389:Core/Src/main.c ****     RCC_ClkInitTypeDef RCC_ClkInitStruct = {0};
 1302              		.loc 1 389 5 view .LVU314
 389:Core/Src/main.c ****     RCC_ClkInitTypeDef RCC_ClkInitStruct = {0};
 1303              		.loc 1 389 24 is_stmt 0 view .LVU315
 1304 0004 2822     		movs	r2, #40
 1305 0006 0021     		movs	r1, #0
 1306 0008 0CA8     		add	r0, sp, #48
 1307 000a FFF7FEFF 		bl	memset
 1308              	.LVL90:
 390:Core/Src/main.c ****     RCC_PeriphCLKInitTypeDef PeriphClkInit = {0};
ARM GAS  /var/folders/l2/71_2bdwd5hl5fnnvwg2sr4v80000gn/T//ccUkH8w1.s 			page 36


 1309              		.loc 1 390 5 is_stmt 1 view .LVU316
 390:Core/Src/main.c ****     RCC_PeriphCLKInitTypeDef PeriphClkInit = {0};
 1310              		.loc 1 390 24 is_stmt 0 view .LVU317
 1311 000e 0023     		movs	r3, #0
 1312 0010 0793     		str	r3, [sp, #28]
 1313 0012 0893     		str	r3, [sp, #32]
 1314 0014 0993     		str	r3, [sp, #36]
 1315 0016 0A93     		str	r3, [sp, #40]
 1316 0018 0B93     		str	r3, [sp, #44]
 391:Core/Src/main.c **** 
 1317              		.loc 1 391 5 is_stmt 1 view .LVU318
 391:Core/Src/main.c **** 
 1318              		.loc 1 391 30 is_stmt 0 view .LVU319
 1319 001a 0193     		str	r3, [sp, #4]
 1320 001c 0293     		str	r3, [sp, #8]
 1321 001e 0393     		str	r3, [sp, #12]
 1322 0020 0493     		str	r3, [sp, #16]
 1323 0022 0593     		str	r3, [sp, #20]
 1324 0024 0693     		str	r3, [sp, #24]
 396:Core/Src/main.c ****     RCC_OscInitStruct.HSIState = RCC_HSI_ON;
 1325              		.loc 1 396 5 is_stmt 1 view .LVU320
 396:Core/Src/main.c ****     RCC_OscInitStruct.HSIState = RCC_HSI_ON;
 1326              		.loc 1 396 38 is_stmt 0 view .LVU321
 1327 0026 0223     		movs	r3, #2
 1328 0028 0C93     		str	r3, [sp, #48]
 397:Core/Src/main.c ****     RCC_OscInitStruct.HSICalibrationValue = RCC_HSICALIBRATION_DEFAULT;
 1329              		.loc 1 397 5 is_stmt 1 view .LVU322
 397:Core/Src/main.c ****     RCC_OscInitStruct.HSICalibrationValue = RCC_HSICALIBRATION_DEFAULT;
 1330              		.loc 1 397 32 is_stmt 0 view .LVU323
 1331 002a 0122     		movs	r2, #1
 1332 002c 1092     		str	r2, [sp, #64]
 398:Core/Src/main.c ****     RCC_OscInitStruct.PLL.PLLState = RCC_PLL_ON;
 1333              		.loc 1 398 5 is_stmt 1 view .LVU324
 398:Core/Src/main.c ****     RCC_OscInitStruct.PLL.PLLState = RCC_PLL_ON;
 1334              		.loc 1 398 43 is_stmt 0 view .LVU325
 1335 002e 1022     		movs	r2, #16
 1336 0030 1192     		str	r2, [sp, #68]
 399:Core/Src/main.c ****     RCC_OscInitStruct.PLL.PLLSource = RCC_PLLSOURCE_HSI;
 1337              		.loc 1 399 5 is_stmt 1 view .LVU326
 399:Core/Src/main.c ****     RCC_OscInitStruct.PLL.PLLSource = RCC_PLLSOURCE_HSI;
 1338              		.loc 1 399 36 is_stmt 0 view .LVU327
 1339 0032 1393     		str	r3, [sp, #76]
 400:Core/Src/main.c ****     RCC_OscInitStruct.PLL.PLLMUL = RCC_PLL_MUL8;
 1340              		.loc 1 400 5 is_stmt 1 view .LVU328
 401:Core/Src/main.c ****     if (HAL_RCC_OscConfig(&RCC_OscInitStruct) != HAL_OK) {
 1341              		.loc 1 401 5 view .LVU329
 401:Core/Src/main.c ****     if (HAL_RCC_OscConfig(&RCC_OscInitStruct) != HAL_OK) {
 1342              		.loc 1 401 34 is_stmt 0 view .LVU330
 1343 0034 4FF4C013 		mov	r3, #1572864
 1344 0038 1593     		str	r3, [sp, #84]
 402:Core/Src/main.c ****         Error_Handler();
 1345              		.loc 1 402 5 is_stmt 1 view .LVU331
 402:Core/Src/main.c ****         Error_Handler();
 1346              		.loc 1 402 9 is_stmt 0 view .LVU332
 1347 003a 0CA8     		add	r0, sp, #48
 1348 003c FFF7FEFF 		bl	HAL_RCC_OscConfig
 1349              	.LVL91:
ARM GAS  /var/folders/l2/71_2bdwd5hl5fnnvwg2sr4v80000gn/T//ccUkH8w1.s 			page 37


 402:Core/Src/main.c ****         Error_Handler();
 1350              		.loc 1 402 8 view .LVU333
 1351 0040 C8B9     		cbnz	r0, .L62
 408:Core/Src/main.c ****                                   RCC_CLOCKTYPE_PCLK1 | RCC_CLOCKTYPE_PCLK2;
 1352              		.loc 1 408 5 is_stmt 1 view .LVU334
 408:Core/Src/main.c ****                                   RCC_CLOCKTYPE_PCLK1 | RCC_CLOCKTYPE_PCLK2;
 1353              		.loc 1 408 33 is_stmt 0 view .LVU335
 1354 0042 0F23     		movs	r3, #15
 1355 0044 0793     		str	r3, [sp, #28]
 410:Core/Src/main.c ****     RCC_ClkInitStruct.AHBCLKDivider = RCC_SYSCLK_DIV1;
 1356              		.loc 1 410 5 is_stmt 1 view .LVU336
 410:Core/Src/main.c ****     RCC_ClkInitStruct.AHBCLKDivider = RCC_SYSCLK_DIV1;
 1357              		.loc 1 410 36 is_stmt 0 view .LVU337
 1358 0046 0223     		movs	r3, #2
 1359 0048 0893     		str	r3, [sp, #32]
 411:Core/Src/main.c ****     RCC_ClkInitStruct.APB1CLKDivider = RCC_HCLK_DIV1;
 1360              		.loc 1 411 5 is_stmt 1 view .LVU338
 411:Core/Src/main.c ****     RCC_ClkInitStruct.APB1CLKDivider = RCC_HCLK_DIV1;
 1361              		.loc 1 411 37 is_stmt 0 view .LVU339
 1362 004a 0023     		movs	r3, #0
 1363 004c 0993     		str	r3, [sp, #36]
 412:Core/Src/main.c ****     RCC_ClkInitStruct.APB2CLKDivider = RCC_HCLK_DIV1;
 1364              		.loc 1 412 5 is_stmt 1 view .LVU340
 412:Core/Src/main.c ****     RCC_ClkInitStruct.APB2CLKDivider = RCC_HCLK_DIV1;
 1365              		.loc 1 412 38 is_stmt 0 view .LVU341
 1366 004e 0A93     		str	r3, [sp, #40]
 413:Core/Src/main.c **** 
 1367              		.loc 1 413 5 is_stmt 1 view .LVU342
 413:Core/Src/main.c **** 
 1368              		.loc 1 413 38 is_stmt 0 view .LVU343
 1369 0050 0B93     		str	r3, [sp, #44]
 415:Core/Src/main.c ****         Error_Handler();
 1370              		.loc 1 415 5 is_stmt 1 view .LVU344
 415:Core/Src/main.c ****         Error_Handler();
 1371              		.loc 1 415 9 is_stmt 0 view .LVU345
 1372 0052 0121     		movs	r1, #1
 1373 0054 07A8     		add	r0, sp, #28
 1374 0056 FFF7FEFF 		bl	HAL_RCC_ClockConfig
 1375              	.LVL92:
 415:Core/Src/main.c ****         Error_Handler();
 1376              		.loc 1 415 8 view .LVU346
 1377 005a 70B9     		cbnz	r0, .L63
 418:Core/Src/main.c ****         RCC_PERIPHCLK_USART1 | RCC_PERIPHCLK_TIM1;
 1378              		.loc 1 418 5 is_stmt 1 view .LVU347
 418:Core/Src/main.c ****         RCC_PERIPHCLK_USART1 | RCC_PERIPHCLK_TIM1;
 1379              		.loc 1 418 40 is_stmt 0 view .LVU348
 1380 005c 41F20103 		movw	r3, #4097
 1381 0060 0193     		str	r3, [sp, #4]
 420:Core/Src/main.c ****     PeriphClkInit.Tim1ClockSelection = RCC_TIM1CLK_HCLK;
 1382              		.loc 1 420 5 is_stmt 1 view .LVU349
 420:Core/Src/main.c ****     PeriphClkInit.Tim1ClockSelection = RCC_TIM1CLK_HCLK;
 1383              		.loc 1 420 40 is_stmt 0 view .LVU350
 1384 0062 0023     		movs	r3, #0
 1385 0064 0393     		str	r3, [sp, #12]
 421:Core/Src/main.c ****     if (HAL_RCCEx_PeriphCLKConfig(&PeriphClkInit) != HAL_OK) {
 1386              		.loc 1 421 5 is_stmt 1 view .LVU351
 421:Core/Src/main.c ****     if (HAL_RCCEx_PeriphCLKConfig(&PeriphClkInit) != HAL_OK) {
ARM GAS  /var/folders/l2/71_2bdwd5hl5fnnvwg2sr4v80000gn/T//ccUkH8w1.s 			page 38


 1387              		.loc 1 421 38 is_stmt 0 view .LVU352
 1388 0066 0693     		str	r3, [sp, #24]
 422:Core/Src/main.c ****         Error_Handler();
 1389              		.loc 1 422 5 is_stmt 1 view .LVU353
 422:Core/Src/main.c ****         Error_Handler();
 1390              		.loc 1 422 9 is_stmt 0 view .LVU354
 1391 0068 01A8     		add	r0, sp, #4
 1392 006a FFF7FEFF 		bl	HAL_RCCEx_PeriphCLKConfig
 1393              	.LVL93:
 422:Core/Src/main.c ****         Error_Handler();
 1394              		.loc 1 422 8 view .LVU355
 1395 006e 30B9     		cbnz	r0, .L64
 425:Core/Src/main.c **** 
 1396              		.loc 1 425 1 view .LVU356
 1397 0070 17B0     		add	sp, sp, #92
 1398              	.LCFI18:
 1399              		.cfi_remember_state
 1400              		.cfi_def_cfa_offset 4
 1401              		@ sp needed
 1402 0072 5DF804FB 		ldr	pc, [sp], #4
 1403              	.L62:
 1404              	.LCFI19:
 1405              		.cfi_restore_state
 403:Core/Src/main.c ****     }
 1406              		.loc 1 403 9 is_stmt 1 view .LVU357
 1407 0076 FFF7FEFF 		bl	Error_Handler
 1408              	.LVL94:
 1409              	.L63:
 416:Core/Src/main.c ****     }
 1410              		.loc 1 416 9 view .LVU358
 1411 007a FFF7FEFF 		bl	Error_Handler
 1412              	.LVL95:
 1413              	.L64:
 423:Core/Src/main.c ****     }
 1414              		.loc 1 423 9 view .LVU359
 1415 007e FFF7FEFF 		bl	Error_Handler
 1416              	.LVL96:
 1417              		.cfi_endproc
 1418              	.LFE135:
 1420              		.section	.rodata.main.str1.4,"aMS",%progbits,1
 1421              		.align	2
 1422              	.LC0:
 1423 0000 53746172 		.ascii	"Start ADC Successfully\012\015\000"
 1423      74204144 
 1423      43205375 
 1423      63636573 
 1423      7366756C 
 1424 0019 000000   		.align	2
 1425              	.LC1:
 1426 001c 53746172 		.ascii	"Start ADC failed\012\015\000"
 1426      74204144 
 1426      43206661 
 1426      696C6564 
 1426      0A0D00
 1427              		.global	__aeabi_ddiv
 1428 002f 00       		.align	2
 1429              	.LC2:
ARM GAS  /var/folders/l2/71_2bdwd5hl5fnnvwg2sr4v80000gn/T//ccUkH8w1.s 			page 39


 1430 0030 77616974 		.ascii	"waiting\011%d\011%d\012\000"
 1430      696E6709 
 1430      25640925 
 1430      640A00
 1431 003f 00       		.align	2
 1432              	.LC3:
 1433 0040 73746172 		.ascii	"start\000"
 1433      7400
 1434 0046 0000     		.align	2
 1435              	.LC4:
 1436 0048 7265662C 		.ascii	"ref,pwm,real:%d\011%d\011%d\012\000"
 1436      70776D2C 
 1436      7265616C 
 1436      3A256409 
 1436      25640925 
 1437              		.section	.text.main,"ax",%progbits
 1438              		.align	1
 1439              		.global	main
 1440              		.syntax unified
 1441              		.thumb
 1442              		.thumb_func
 1444              	main:
 1445              	.LFB134:
 245:Core/Src/main.c ****     /* USER CODE BEGIN 1 */
 1446              		.loc 1 245 16 view -0
 1447              		.cfi_startproc
 1448              		@ args = 0, pretend = 0, frame = 8
 1449              		@ frame_needed = 0, uses_anonymous_args = 0
 1450 0000 30B5     		push	{r4, r5, lr}
 1451              	.LCFI20:
 1452              		.cfi_def_cfa_offset 12
 1453              		.cfi_offset 4, -12
 1454              		.cfi_offset 5, -8
 1455              		.cfi_offset 14, -4
 1456 0002 83B0     		sub	sp, sp, #12
 1457              	.LCFI21:
 1458              		.cfi_def_cfa_offset 24
 255:Core/Src/main.c **** 
 1459              		.loc 1 255 5 view .LVU361
 1460 0004 FFF7FEFF 		bl	HAL_Init
 1461              	.LVL97:
 262:Core/Src/main.c **** 
 1462              		.loc 1 262 5 view .LVU362
 1463 0008 FFF7FEFF 		bl	SystemClock_Config
 1464              	.LVL98:
 269:Core/Src/main.c ****     MX_DMA_Init();
 1465              		.loc 1 269 5 view .LVU363
 1466 000c FFF7FEFF 		bl	MX_GPIO_Init
 1467              	.LVL99:
 270:Core/Src/main.c ****     MX_TIM1_Init();
 1468              		.loc 1 270 5 view .LVU364
 1469 0010 FFF7FEFF 		bl	MX_DMA_Init
 1470              	.LVL100:
 271:Core/Src/main.c ****     MX_TIM16_Init();
 1471              		.loc 1 271 5 view .LVU365
 1472 0014 FFF7FEFF 		bl	MX_TIM1_Init
 1473              	.LVL101:
ARM GAS  /var/folders/l2/71_2bdwd5hl5fnnvwg2sr4v80000gn/T//ccUkH8w1.s 			page 40


 272:Core/Src/main.c ****     MX_TIM2_Init();
 1474              		.loc 1 272 5 view .LVU366
 1475 0018 FFF7FEFF 		bl	MX_TIM16_Init
 1476              	.LVL102:
 273:Core/Src/main.c ****     MX_TIM3_Init();
 1477              		.loc 1 273 5 view .LVU367
 1478 001c FFF7FEFF 		bl	MX_TIM2_Init
 1479              	.LVL103:
 274:Core/Src/main.c ****     MX_SPI1_Init();
 1480              		.loc 1 274 5 view .LVU368
 1481 0020 FFF7FEFF 		bl	MX_TIM3_Init
 1482              	.LVL104:
 275:Core/Src/main.c ****     MX_USART1_UART_Init();
 1483              		.loc 1 275 5 view .LVU369
 1484 0024 FFF7FEFF 		bl	MX_SPI1_Init
 1485              	.LVL105:
 276:Core/Src/main.c ****     MX_ADC1_Init();
 1486              		.loc 1 276 5 view .LVU370
 1487 0028 FFF7FEFF 		bl	MX_USART1_UART_Init
 1488              	.LVL106:
 277:Core/Src/main.c ****     /* USER CODE BEGIN 2 */
 1489              		.loc 1 277 5 view .LVU371
 1490 002c FFF7FEFF 		bl	MX_ADC1_Init
 1491              	.LVL107:
 279:Core/Src/main.c ****     setbuf(stdout, NULL);
 1492              		.loc 1 279 5 view .LVU372
 279:Core/Src/main.c ****     setbuf(stdout, NULL);
 1493              		.loc 1 279 12 is_stmt 0 view .LVU373
 1494 0030 694C     		ldr	r4, .L81+16
 1495 0032 2368     		ldr	r3, [r4]
 279:Core/Src/main.c ****     setbuf(stdout, NULL);
 1496              		.loc 1 279 5 view .LVU374
 1497 0034 0021     		movs	r1, #0
 1498 0036 5868     		ldr	r0, [r3, #4]
 1499 0038 FFF7FEFF 		bl	setbuf
 1500              	.LVL108:
 280:Core/Src/main.c ****     setbuf(stderr, NULL);
 1501              		.loc 1 280 5 is_stmt 1 view .LVU375
 280:Core/Src/main.c ****     setbuf(stderr, NULL);
 1502              		.loc 1 280 12 is_stmt 0 view .LVU376
 1503 003c 2368     		ldr	r3, [r4]
 280:Core/Src/main.c ****     setbuf(stderr, NULL);
 1504              		.loc 1 280 5 view .LVU377
 1505 003e 0021     		movs	r1, #0
 1506 0040 9868     		ldr	r0, [r3, #8]
 1507 0042 FFF7FEFF 		bl	setbuf
 1508              	.LVL109:
 281:Core/Src/main.c ****     dma_printf_init(&huart1);
 1509              		.loc 1 281 5 is_stmt 1 view .LVU378
 281:Core/Src/main.c ****     dma_printf_init(&huart1);
 1510              		.loc 1 281 12 is_stmt 0 view .LVU379
 1511 0046 2368     		ldr	r3, [r4]
 281:Core/Src/main.c ****     dma_printf_init(&huart1);
 1512              		.loc 1 281 5 view .LVU380
 1513 0048 0021     		movs	r1, #0
 1514 004a D868     		ldr	r0, [r3, #12]
 1515 004c FFF7FEFF 		bl	setbuf
ARM GAS  /var/folders/l2/71_2bdwd5hl5fnnvwg2sr4v80000gn/T//ccUkH8w1.s 			page 41


 1516              	.LVL110:
 282:Core/Src/main.c ****     // dma_scanf_init(&huart1);
 1517              		.loc 1 282 5 is_stmt 1 view .LVU381
 1518 0050 6248     		ldr	r0, .L81+20
 1519 0052 FFF7FEFF 		bl	dma_printf_init
 1520              	.LVL111:
 286:Core/Src/main.c ****     HAL_TIMEx_PWMN_Start(&htim1, TIM_CHANNEL_1);  // L
 1521              		.loc 1 286 5 view .LVU382
 1522 0056 624C     		ldr	r4, .L81+24
 1523 0058 0021     		movs	r1, #0
 1524 005a 2046     		mov	r0, r4
 1525 005c FFF7FEFF 		bl	HAL_TIM_PWM_Start
 1526              	.LVL112:
 287:Core/Src/main.c **** 
 1527              		.loc 1 287 5 view .LVU383
 1528 0060 0021     		movs	r1, #0
 1529 0062 2046     		mov	r0, r4
 1530 0064 FFF7FEFF 		bl	HAL_TIMEx_PWMN_Start
 1531              	.LVL113:
 290:Core/Src/main.c ****     HAL_TIMEx_PWMN_Start(&htim16, TIM_CHANNEL_1);  // L
 1532              		.loc 1 290 5 view .LVU384
 1533 0068 5E4D     		ldr	r5, .L81+28
 1534 006a 0021     		movs	r1, #0
 1535 006c 2846     		mov	r0, r5
 1536 006e FFF7FEFF 		bl	HAL_TIM_PWM_Start
 1537              	.LVL114:
 291:Core/Src/main.c **** 
 1538              		.loc 1 291 5 view .LVU385
 1539 0072 0021     		movs	r1, #0
 1540 0074 2846     		mov	r0, r5
 1541 0076 FFF7FEFF 		bl	HAL_TIMEx_PWMN_Start
 1542              	.LVL115:
 294:Core/Src/main.c ****     HAL_TIMEx_PWMN_Start(&htim1, TIM_CHANNEL_3);  // L
 1543              		.loc 1 294 5 view .LVU386
 1544 007a 0C21     		movs	r1, #12
 1545 007c 5A48     		ldr	r0, .L81+32
 1546 007e FFF7FEFF 		bl	HAL_TIM_PWM_Start
 1547              	.LVL116:
 295:Core/Src/main.c **** 
 1548              		.loc 1 295 5 view .LVU387
 1549 0082 0821     		movs	r1, #8
 1550 0084 2046     		mov	r0, r4
 1551 0086 FFF7FEFF 		bl	HAL_TIMEx_PWMN_Start
 1552              	.LVL117:
 303:Core/Src/main.c **** 
 1553              		.loc 1 303 5 view .LVU388
 1554 008a 0022     		movs	r2, #0
 1555 008c 0221     		movs	r1, #2
 1556 008e 5748     		ldr	r0, .L81+36
 1557 0090 FFF7FEFF 		bl	HAL_GPIO_WritePin
 1558              	.LVL118:
 305:Core/Src/main.c **** 
 1559              		.loc 1 305 5 view .LVU389
 1560 0094 564C     		ldr	r4, .L81+40
 1561 0096 0021     		movs	r1, #0
 1562 0098 2046     		mov	r0, r4
 1563 009a FFF7FEFF 		bl	HAL_ADCEx_Calibration_Start
ARM GAS  /var/folders/l2/71_2bdwd5hl5fnnvwg2sr4v80000gn/T//ccUkH8w1.s 			page 42


 1564              	.LVL119:
 307:Core/Src/main.c ****         printf("Start ADC Successfully\n\r");
 1565              		.loc 1 307 5 view .LVU390
 307:Core/Src/main.c ****         printf("Start ADC Successfully\n\r");
 1566              		.loc 1 307 9 is_stmt 0 view .LVU391
 1567 009e 0322     		movs	r2, #3
 1568 00a0 5449     		ldr	r1, .L81+44
 1569 00a2 2046     		mov	r0, r4
 1570 00a4 FFF7FEFF 		bl	HAL_ADC_Start_DMA
 1571              	.LVL120:
 307:Core/Src/main.c ****         printf("Start ADC Successfully\n\r");
 1572              		.loc 1 307 8 view .LVU392
 1573 00a8 20B9     		cbnz	r0, .L66
 308:Core/Src/main.c ****     else
 1574              		.loc 1 308 9 is_stmt 1 view .LVU393
 1575 00aa 5348     		ldr	r0, .L81+48
 1576 00ac FFF7FEFF 		bl	printf
 1577              	.LVL121:
 1578              	.L68:
 245:Core/Src/main.c ****     /* USER CODE BEGIN 1 */
 1579              		.loc 1 245 16 is_stmt 0 discriminator 1 view .LVU394
 1580 00b0 0024     		movs	r4, #0
 1581 00b2 25E0     		b	.L67
 1582              	.L66:
 310:Core/Src/main.c ****     /* USER CODE END 2 */
 1583              		.loc 1 310 9 is_stmt 1 view .LVU395
 1584 00b4 5148     		ldr	r0, .L81+52
 1585 00b6 FFF7FEFF 		bl	printf
 1586              	.LVL122:
 1587 00ba F9E7     		b	.L68
 1588              	.LVL123:
 1589              	.L69:
 1590              	.LBB11:
 317:Core/Src/main.c ****     }
 1591              		.loc 1 317 9 discriminator 3 view .LVU396
 317:Core/Src/main.c ****     }
 1592              		.loc 1 317 28 is_stmt 0 discriminator 3 view .LVU397
 1593 00bc 2046     		mov	r0, r4
 1594 00be FFF7FEFF 		bl	__aeabi_i2d
 1595              	.LVL124:
 1596 00c2 0022     		movs	r2, #0
 1597 00c4 4E4B     		ldr	r3, .L81+56
 1598 00c6 FFF7FEFF 		bl	__aeabi_dmul
 1599              	.LVL125:
 1600 00ca 3FA3     		adr	r3, .L81
 1601 00cc D3E90023 		ldrd	r2, [r3]
 1602 00d0 FFF7FEFF 		bl	__aeabi_ddiv
 1603              	.LVL126:
 1604 00d4 3EA3     		adr	r3, .L81+8
 1605 00d6 D3E90023 		ldrd	r2, [r3]
 1606 00da FFF7FEFF 		bl	__aeabi_dmul
 1607              	.LVL127:
 317:Core/Src/main.c ****     }
 1608              		.loc 1 317 24 discriminator 3 view .LVU398
 1609 00de 0022     		movs	r2, #0
 1610 00e0 484B     		ldr	r3, .L81+60
 1611 00e2 FFF7FEFF 		bl	__aeabi_ddiv
ARM GAS  /var/folders/l2/71_2bdwd5hl5fnnvwg2sr4v80000gn/T//ccUkH8w1.s 			page 43


 1612              	.LVL128:
 1613 00e6 41EC100B 		vmov	d0, r0, r1
 1614 00ea FFF7FEFF 		bl	cos
 1615              	.LVL129:
 1616 00ee 51EC100B 		vmov	r0, r1, d0
 1617 00f2 FFF7FEFF 		bl	__aeabi_d2f
 1618              	.LVL130:
 317:Core/Src/main.c ****     }
 1619              		.loc 1 317 22 discriminator 3 view .LVU399
 1620 00f6 444B     		ldr	r3, .L81+64
 1621 00f8 03EB8403 		add	r3, r3, r4, lsl #2
 1622 00fc 1860     		str	r0, [r3]	@ float
 316:Core/Src/main.c ****         cos_table[i] = cos(radians(i * 360.0 / 1170.0));
 1623              		.loc 1 316 32 is_stmt 1 discriminator 3 view .LVU400
 1624 00fe 0134     		adds	r4, r4, #1
 1625              	.LVL131:
 1626              	.L67:
 316:Core/Src/main.c ****         cos_table[i] = cos(radians(i * 360.0 / 1170.0));
 1627              		.loc 1 316 23 discriminator 1 view .LVU401
 1628 0100 40F29143 		movw	r3, #1169
 1629 0104 9C42     		cmp	r4, r3
 1630 0106 D9DD     		ble	.L69
 1631              	.LBE11:
 332:Core/Src/main.c **** 
 1632              		.loc 1 332 5 view .LVU402
 332:Core/Src/main.c **** 
 1633              		.loc 1 332 12 is_stmt 0 view .LVU403
 1634 0108 404B     		ldr	r3, .L81+68
 1635 010a 40F62532 		movw	r2, #2853
 1636 010e 1A60     		str	r2, [r3]
 334:Core/Src/main.c **** 
 1637              		.loc 1 334 5 is_stmt 1 view .LVU404
 1638 0110 3F48     		ldr	r0, .L81+72
 1639 0112 FFF7FEFF 		bl	HAL_TIM_Base_Start_IT
 1640              	.LVL132:
 336:Core/Src/main.c ****     ring_buf[0] = 0B01000000;
 1641              		.loc 1 336 5 view .LVU405
 336:Core/Src/main.c ****     ring_buf[0] = 0B01000000;
 1642              		.loc 1 336 13 is_stmt 0 view .LVU406
 1643 0116 0023     		movs	r3, #0
 1644 0118 ADF80430 		strh	r3, [sp, #4]	@ movhi
 337:Core/Src/main.c ****     ring_buf[1] = 0B11000000;
 1645              		.loc 1 337 5 is_stmt 1 view .LVU407
 337:Core/Src/main.c ****     ring_buf[1] = 0B11000000;
 1646              		.loc 1 337 17 is_stmt 0 view .LVU408
 1647 011c 4025     		movs	r5, #64
 1648 011e 8DF80450 		strb	r5, [sp, #4]
 338:Core/Src/main.c **** 
 1649              		.loc 1 338 5 is_stmt 1 view .LVU409
 338:Core/Src/main.c **** 
 1650              		.loc 1 338 17 is_stmt 0 view .LVU410
 1651 0122 C024     		movs	r4, #192
 1652              	.LVL133:
 338:Core/Src/main.c **** 
 1653              		.loc 1 338 17 view .LVU411
 1654 0124 8DF80540 		strb	r4, [sp, #5]
 340:Core/Src/main.c **** 
ARM GAS  /var/folders/l2/71_2bdwd5hl5fnnvwg2sr4v80000gn/T//ccUkH8w1.s 			page 44


 1655              		.loc 1 340 5 is_stmt 1 view .LVU412
 1656 0128 0222     		movs	r2, #2
 1657 012a 01A9     		add	r1, sp, #4
 1658 012c 2B48     		ldr	r0, .L81+20
 1659 012e FFF7FEFF 		bl	HAL_UART_Receive_DMA
 1660              	.LVL134:
 342:Core/Src/main.c ****     ring_buf[1] = 0B11000000;
 1661              		.loc 1 342 5 view .LVU413
 342:Core/Src/main.c ****     ring_buf[1] = 0B11000000;
 1662              		.loc 1 342 17 is_stmt 0 view .LVU414
 1663 0132 8DF80450 		strb	r5, [sp, #4]
 343:Core/Src/main.c **** 
 1664              		.loc 1 343 5 is_stmt 1 view .LVU415
 343:Core/Src/main.c **** 
 1665              		.loc 1 343 17 is_stmt 0 view .LVU416
 1666 0136 8DF80540 		strb	r4, [sp, #5]
 345:Core/Src/main.c ****         printf("waiting\t%d\t%d\n", ring_buf[0], ring_buf[1]);
 1667              		.loc 1 345 5 is_stmt 1 view .LVU417
 345:Core/Src/main.c ****         printf("waiting\t%d\t%d\n", ring_buf[0], ring_buf[1]);
 1668              		.loc 1 345 11 is_stmt 0 view .LVU418
 1669 013a 04E0     		b	.L70
 1670              	.L71:
 346:Core/Src/main.c ****     }
 1671              		.loc 1 346 9 is_stmt 1 view .LVU419
 1672 013c 9DF80520 		ldrb	r2, [sp, #5]	@ zero_extendqisi2
 1673 0140 3448     		ldr	r0, .L81+76
 1674 0142 FFF7FEFF 		bl	printf
 1675              	.LVL135:
 1676              	.L70:
 345:Core/Src/main.c ****         printf("waiting\t%d\t%d\n", ring_buf[0], ring_buf[1]);
 1677              		.loc 1 345 12 view .LVU420
 345:Core/Src/main.c ****         printf("waiting\t%d\t%d\n", ring_buf[0], ring_buf[1]);
 1678              		.loc 1 345 22 is_stmt 0 view .LVU421
 1679 0146 9DF80410 		ldrb	r1, [sp, #4]	@ zero_extendqisi2
 345:Core/Src/main.c ****         printf("waiting\t%d\t%d\n", ring_buf[0], ring_buf[1]);
 1680              		.loc 1 345 12 view .LVU422
 1681 014a FF29     		cmp	r1, #255
 1682 014c F6D1     		bne	.L71
 345:Core/Src/main.c ****         printf("waiting\t%d\t%d\n", ring_buf[0], ring_buf[1]);
 1683              		.loc 1 345 51 discriminator 1 view .LVU423
 1684 014e 9DF80530 		ldrb	r3, [sp, #5]	@ zero_extendqisi2
 345:Core/Src/main.c ****         printf("waiting\t%d\t%d\n", ring_buf[0], ring_buf[1]);
 1685              		.loc 1 345 12 discriminator 1 view .LVU424
 1686 0152 FF2B     		cmp	r3, #255
 1687 0154 F2D1     		bne	.L71
 348:Core/Src/main.c ****     ring_buf[1] = 0B11000000;
 1688              		.loc 1 348 5 is_stmt 1 view .LVU425
 348:Core/Src/main.c ****     ring_buf[1] = 0B11000000;
 1689              		.loc 1 348 17 is_stmt 0 view .LVU426
 1690 0156 4023     		movs	r3, #64
 1691 0158 8DF80430 		strb	r3, [sp, #4]
 349:Core/Src/main.c **** 
 1692              		.loc 1 349 5 is_stmt 1 view .LVU427
 349:Core/Src/main.c **** 
 1693              		.loc 1 349 17 is_stmt 0 view .LVU428
 1694 015c C023     		movs	r3, #192
 1695 015e 8DF80530 		strb	r3, [sp, #5]
ARM GAS  /var/folders/l2/71_2bdwd5hl5fnnvwg2sr4v80000gn/T//ccUkH8w1.s 			page 45


 351:Core/Src/main.c **** 
 1696              		.loc 1 351 5 is_stmt 1 view .LVU429
 1697 0162 2D48     		ldr	r0, .L81+80
 1698 0164 FFF7FEFF 		bl	puts
 1699              	.LVL136:
 1700 0168 1BE0     		b	.L78
 1701              	.LVL137:
 1702              	.L73:
 1703              	.LBB12:
 1704              	.LBB13:
 361:Core/Src/main.c ****             if (ring_buf[i] >> 7 == id) {
 1705              		.loc 1 361 33 discriminator 2 view .LVU430
 1706 016a 0133     		adds	r3, r3, #1
 1707              	.LVL138:
 1708              	.L72:
 361:Core/Src/main.c ****             if (ring_buf[i] >> 7 == id) {
 1709              		.loc 1 361 27 discriminator 1 view .LVU431
 1710 016c 012B     		cmp	r3, #1
 1711 016e 08DC     		bgt	.L80
 362:Core/Src/main.c ****                 index = i;
 1712              		.loc 1 362 13 view .LVU432
 362:Core/Src/main.c ****                 index = i;
 1713              		.loc 1 362 25 is_stmt 0 view .LVU433
 1714 0170 03F10802 		add	r2, r3, #8
 1715 0174 6A44     		add	r2, sp, r2
 362:Core/Src/main.c ****                 index = i;
 1716              		.loc 1 362 34 view .LVU434
 1717 0176 12F9042C 		ldrsb	r2, [r2, #-4]
 362:Core/Src/main.c ****                 index = i;
 1718              		.loc 1 362 16 view .LVU435
 1719 017a 002A     		cmp	r2, #0
 1720 017c F5DB     		blt	.L73
 363:Core/Src/main.c ****                 break;
 1721              		.loc 1 363 17 is_stmt 1 view .LVU436
 363:Core/Src/main.c ****                 break;
 1722              		.loc 1 363 23 is_stmt 0 view .LVU437
 1723 017e DBB2     		uxtb	r3, r3
 1724              	.LVL139:
 364:Core/Src/main.c ****             }
 1725              		.loc 1 364 17 is_stmt 1 view .LVU438
 1726 0180 00E0     		b	.L74
 1727              	.LVL140:
 1728              	.L80:
 364:Core/Src/main.c ****             }
 1729              		.loc 1 364 17 is_stmt 0 view .LVU439
 1730              	.LBE13:
 360:Core/Src/main.c ****         for (int i = 0; i < 2; i++) {
 1731              		.loc 1 360 17 view .LVU440
 1732 0182 0023     		movs	r3, #0
 1733              	.LVL141:
 1734              	.L74:
 368:Core/Src/main.c **** 
 1735              		.loc 1 368 9 is_stmt 1 view .LVU441
 368:Core/Src/main.c **** 
 1736              		.loc 1 368 33 is_stmt 0 view .LVU442
 1737 0184 0833     		adds	r3, r3, #8
 1738              	.LVL142:
ARM GAS  /var/folders/l2/71_2bdwd5hl5fnnvwg2sr4v80000gn/T//ccUkH8w1.s 			page 46


 368:Core/Src/main.c **** 
 1739              		.loc 1 368 33 view .LVU443
 1740 0186 6B44     		add	r3, sp, r3
 1741 0188 13F8043C 		ldrb	r3, [r3, #-4]	@ zero_extendqisi2
 368:Core/Src/main.c **** 
 1742              		.loc 1 368 49 view .LVU444
 1743 018c 5B00     		lsls	r3, r3, #1
 368:Core/Src/main.c **** 
 1744              		.loc 1 368 16 view .LVU445
 1745 018e 5BB2     		sxtb	r3, r3
 1746              	.LVL143:
 370:Core/Src/main.c ****             isReleased = 1;
 1747              		.loc 1 370 9 is_stmt 1 view .LVU446
 370:Core/Src/main.c ****             isReleased = 1;
 1748              		.loc 1 370 12 is_stmt 0 view .LVU447
 1749 0190 13F1780F 		cmn	r3, #120
 1750 0194 13DA     		bge	.L76
 371:Core/Src/main.c ****         } else {
 1751              		.loc 1 371 13 is_stmt 1 view .LVU448
 371:Core/Src/main.c ****         } else {
 1752              		.loc 1 371 24 is_stmt 0 view .LVU449
 1753 0196 214A     		ldr	r2, .L81+84
 1754 0198 0121     		movs	r1, #1
 1755 019a 1170     		strb	r1, [r2]
 1756              	.L77:
 376:Core/Src/main.c **** 
 1757              		.loc 1 376 9 is_stmt 1 view .LVU450
 376:Core/Src/main.c **** 
 1758              		.loc 1 376 29 is_stmt 0 view .LVU451
 1759 019c 5B00     		lsls	r3, r3, #1
 1760              	.LVL144:
 376:Core/Src/main.c **** 
 1761              		.loc 1 376 22 view .LVU452
 1762 019e 204A     		ldr	r2, .L81+88
 1763 01a0 1380     		strh	r3, [r2]	@ movhi
 1764              	.LBE12:
 353:Core/Src/main.c ****         /* USER CODE END WHILE */
 1765              		.loc 1 353 11 is_stmt 1 view .LVU453
 1766              	.LVL145:
 1767              	.L78:
 353:Core/Src/main.c ****         /* USER CODE END WHILE */
 1768              		.loc 1 353 5 view .LVU454
 1769              	.LBB15:
 358:Core/Src/main.c **** 
 1770              		.loc 1 358 9 view .LVU455
 1771 01a2 204B     		ldr	r3, .L81+92
 1772 01a4 B3F90030 		ldrsh	r3, [r3]
 1773 01a8 1F4A     		ldr	r2, .L81+96
 1774 01aa B2F90020 		ldrsh	r2, [r2]
 1775 01ae 1C49     		ldr	r1, .L81+88
 1776 01b0 B1F90010 		ldrsh	r1, [r1]
 1777 01b4 1D48     		ldr	r0, .L81+100
 1778 01b6 FFF7FEFF 		bl	printf
 1779              	.LVL146:
 360:Core/Src/main.c ****         for (int i = 0; i < 2; i++) {
 1780              		.loc 1 360 9 view .LVU456
 361:Core/Src/main.c ****             if (ring_buf[i] >> 7 == id) {
ARM GAS  /var/folders/l2/71_2bdwd5hl5fnnvwg2sr4v80000gn/T//ccUkH8w1.s 			page 47


 1781              		.loc 1 361 9 view .LVU457
 1782              	.LBB14:
 361:Core/Src/main.c ****             if (ring_buf[i] >> 7 == id) {
 1783              		.loc 1 361 14 view .LVU458
 361:Core/Src/main.c ****             if (ring_buf[i] >> 7 == id) {
 1784              		.loc 1 361 18 is_stmt 0 view .LVU459
 1785 01ba 0023     		movs	r3, #0
 361:Core/Src/main.c ****             if (ring_buf[i] >> 7 == id) {
 1786              		.loc 1 361 9 view .LVU460
 1787 01bc D6E7     		b	.L72
 1788              	.LVL147:
 1789              	.L76:
 361:Core/Src/main.c ****             if (ring_buf[i] >> 7 == id) {
 1790              		.loc 1 361 9 view .LVU461
 1791              	.LBE14:
 373:Core/Src/main.c ****         }
 1792              		.loc 1 373 13 is_stmt 1 view .LVU462
 373:Core/Src/main.c ****         }
 1793              		.loc 1 373 24 is_stmt 0 view .LVU463
 1794 01be 174A     		ldr	r2, .L81+84
 1795 01c0 0021     		movs	r1, #0
 1796 01c2 1170     		strb	r1, [r2]
 1797 01c4 EAE7     		b	.L77
 1798              	.L82:
 1799 01c6 00BF     		.align	3
 1800              	.L81:
 1801 01c8 00000000 		.word	0
 1802 01cc 00489240 		.word	1083328512
 1803 01d0 182D4454 		.word	1413754136
 1804 01d4 FB210940 		.word	1074340347
 1805 01d8 00000000 		.word	_impure_ptr
 1806 01dc 00000000 		.word	huart1
 1807 01e0 00000000 		.word	htim1
 1808 01e4 00000000 		.word	htim16
 1809 01e8 00000000 		.word	htim3
 1810 01ec 00040048 		.word	1207960576
 1811 01f0 00000000 		.word	hadc1
 1812 01f4 00000000 		.word	adcBuffer
 1813 01f8 00000000 		.word	.LC0
 1814 01fc 1C000000 		.word	.LC1
 1815 0200 00807640 		.word	1081507840
 1816 0204 00806640 		.word	1080459264
 1817 0208 00000000 		.word	cos_table
 1818 020c 00000000 		.word	offset
 1819 0210 00000000 		.word	htim2
 1820 0214 30000000 		.word	.LC2
 1821 0218 40000000 		.word	.LC3
 1822 021c 00000000 		.word	isReleased
 1823 0220 00000000 		.word	velocity_ref
 1824 0224 00000000 		.word	velocity
 1825 0228 00000000 		.word	pwm
 1826 022c 48000000 		.word	.LC4
 1827              	.LBE15:
 1828              		.cfi_endproc
 1829              	.LFE134:
 1831              		.section	.bss.int_err_vel.0,"aw",%nobits
 1832              		.align	2
ARM GAS  /var/folders/l2/71_2bdwd5hl5fnnvwg2sr4v80000gn/T//ccUkH8w1.s 			page 48


 1835              	int_err_vel.0:
 1836 0000 00000000 		.space	4
 1837              		.section	.bss.old_real_angle.1,"aw",%nobits
 1838              		.align	1
 1841              	old_real_angle.1:
 1842 0000 0000     		.space	2
 1843              		.section	.bss.count.2,"aw",%nobits
 1846              	count.2:
 1847 0000 00       		.space	1
 1848              		.section	.bss.str.3,"aw",%nobits
 1849              		.align	2
 1852              	str.3:
 1853 0000 00000000 		.space	5
 1853      00
 1854              		.global	isReleased
 1855              		.section	.data.isReleased,"aw"
 1858              	isReleased:
 1859 0000 01       		.byte	1
 1860              		.global	id
 1861              		.section	.rodata.id,"a"
 1864              	id:
 1865 0000 00       		.space	1
 1866              		.global	pwm
 1867              		.section	.bss.pwm,"aw",%nobits
 1868              		.align	1
 1871              	pwm:
 1872 0000 0000     		.space	2
 1873              		.global	velocity_ref
 1874              		.section	.bss.velocity_ref,"aw",%nobits
 1875              		.align	1
 1878              	velocity_ref:
 1879 0000 0000     		.space	2
 1880              		.global	pre_scaler
 1881              		.section	.rodata.pre_scaler,"a"
 1884              	pre_scaler:
 1885 0000 03       		.byte	3
 1886              		.global	velocity
 1887              		.section	.bss.velocity,"aw",%nobits
 1888              		.align	1
 1891              	velocity:
 1892 0000 0000     		.space	2
 1893              		.global	sense
 1894              		.section	.bss.sense,"aw",%nobits
 1895              		.align	2
 1898              	sense:
 1899 0000 00000000 		.space	12
 1899      00000000 
 1899      00000000 
 1900              		.global	adcOffset
 1901              		.section	.bss.adcOffset,"aw",%nobits
 1902              		.align	2
 1905              	adcOffset:
 1906 0000 00000000 		.space	6
 1906      0000
 1907              		.global	adcBuffer
 1908              		.section	.bss.adcBuffer,"aw",%nobits
 1909              		.align	2
ARM GAS  /var/folders/l2/71_2bdwd5hl5fnnvwg2sr4v80000gn/T//ccUkH8w1.s 			page 49


 1912              	adcBuffer:
 1913 0000 00000000 		.space	6
 1913      0000
 1914              		.global	cos_table
 1915              		.section	.bss.cos_table,"aw",%nobits
 1916              		.align	2
 1919              	cos_table:
 1920 0000 00000000 		.space	4680
 1920      00000000 
 1920      00000000 
 1920      00000000 
 1920      00000000 
 1921              		.global	offset
 1922              		.section	.bss.offset,"aw",%nobits
 1923              		.align	2
 1926              	offset:
 1927 0000 00000000 		.space	4
 1928              		.text
 1929              	.Letext0:
 1930              		.file 3 "/opt/ST/STM32CubeCLT_1.16.0/GNU-tools-for-STM32/arm-none-eabi/include/machine/_default_ty
 1931              		.file 4 "/opt/ST/STM32CubeCLT_1.16.0/GNU-tools-for-STM32/arm-none-eabi/include/sys/_stdint.h"
 1932              		.file 5 "Drivers/CMSIS/Device/ST/STM32F3xx/Include/stm32f303x8.h"
 1933              		.file 6 "Drivers/CMSIS/Device/ST/STM32F3xx/Include/stm32f3xx.h"
 1934              		.file 7 "Drivers/STM32F3xx_HAL_Driver/Inc/stm32f3xx_hal_def.h"
 1935              		.file 8 "Drivers/STM32F3xx_HAL_Driver/Inc/stm32f3xx_hal_rcc.h"
 1936              		.file 9 "Drivers/STM32F3xx_HAL_Driver/Inc/stm32f3xx_hal_rcc_ex.h"
 1937              		.file 10 "Drivers/STM32F3xx_HAL_Driver/Inc/stm32f3xx_hal_gpio.h"
 1938              		.file 11 "Drivers/STM32F3xx_HAL_Driver/Inc/stm32f3xx_hal_dma.h"
 1939              		.file 12 "Drivers/STM32F3xx_HAL_Driver/Inc/stm32f3xx_hal_adc_ex.h"
 1940              		.file 13 "Drivers/STM32F3xx_HAL_Driver/Inc/stm32f3xx_hal_adc.h"
 1941              		.file 14 "Drivers/STM32F3xx_HAL_Driver/Inc/stm32f3xx_hal_spi.h"
 1942              		.file 15 "Drivers/STM32F3xx_HAL_Driver/Inc/stm32f3xx_hal_tim.h"
 1943              		.file 16 "Drivers/STM32F3xx_HAL_Driver/Inc/stm32f3xx_hal_uart.h"
 1944              		.file 17 "Core/Inc/adc.h"
 1945              		.file 18 "Core/Inc/spi.h"
 1946              		.file 19 "Core/Inc/tim.h"
 1947              		.file 20 "Core/Inc/usart.h"
 1948              		.file 21 "/opt/ST/STM32CubeCLT_1.16.0/GNU-tools-for-STM32/lib/gcc/arm-none-eabi/12.3.1/include/std
 1949              		.file 22 "/opt/ST/STM32CubeCLT_1.16.0/GNU-tools-for-STM32/arm-none-eabi/include/sys/_types.h"
 1950              		.file 23 "/opt/ST/STM32CubeCLT_1.16.0/GNU-tools-for-STM32/arm-none-eabi/include/sys/reent.h"
 1951              		.file 24 "/opt/ST/STM32CubeCLT_1.16.0/GNU-tools-for-STM32/arm-none-eabi/include/sys/lock.h"
 1952              		.file 25 "/opt/ST/STM32CubeCLT_1.16.0/GNU-tools-for-STM32/arm-none-eabi/include/stdio.h"
 1953              		.file 26 "Core/Inc/dma_printf.h"
 1954              		.file 27 "Drivers/STM32F3xx_HAL_Driver/Inc/stm32f3xx_hal_tim_ex.h"
 1955              		.file 28 "Core/Inc/dma.h"
 1956              		.file 29 "Core/Inc/gpio.h"
 1957              		.file 30 "<built-in>"
 1958              		.file 31 "/opt/ST/STM32CubeCLT_1.16.0/GNU-tools-for-STM32/arm-none-eabi/include/math.h"
 1959              		.file 32 "Drivers/STM32F3xx_HAL_Driver/Inc/stm32f3xx_hal.h"
ARM GAS  /var/folders/l2/71_2bdwd5hl5fnnvwg2sr4v80000gn/T//ccUkH8w1.s 			page 50


DEFINED SYMBOLS
                            *ABS*:00000000 main.c
/var/folders/l2/71_2bdwd5hl5fnnvwg2sr4v80000gn/T//ccUkH8w1.s:21     .text.spiCalcEvenParity:00000000 $t
/var/folders/l2/71_2bdwd5hl5fnnvwg2sr4v80000gn/T//ccUkH8w1.s:27     .text.spiCalcEvenParity:00000000 spiCalcEvenParity
/var/folders/l2/71_2bdwd5hl5fnnvwg2sr4v80000gn/T//ccUkH8w1.s:93     .text.AS5048A_read:00000000 $t
/var/folders/l2/71_2bdwd5hl5fnnvwg2sr4v80000gn/T//ccUkH8w1.s:99     .text.AS5048A_read:00000000 AS5048A_read
/var/folders/l2/71_2bdwd5hl5fnnvwg2sr4v80000gn/T//ccUkH8w1.s:188    .text.AS5048A_read:0000007c $d
/var/folders/l2/71_2bdwd5hl5fnnvwg2sr4v80000gn/T//ccUkH8w1.s:193    .text.getRotation:00000000 $t
/var/folders/l2/71_2bdwd5hl5fnnvwg2sr4v80000gn/T//ccUkH8w1.s:199    .text.getRotation:00000000 getRotation
/var/folders/l2/71_2bdwd5hl5fnnvwg2sr4v80000gn/T//ccUkH8w1.s:225    .text.electrical_angle:00000000 $t
/var/folders/l2/71_2bdwd5hl5fnnvwg2sr4v80000gn/T//ccUkH8w1.s:231    .text.electrical_angle:00000000 electrical_angle
/var/folders/l2/71_2bdwd5hl5fnnvwg2sr4v80000gn/T//ccUkH8w1.s:258    .text.electrical_angle:00000018 $d
/var/folders/l2/71_2bdwd5hl5fnnvwg2sr4v80000gn/T//ccUkH8w1.s:263    .text.setPhase:00000000 $t
/var/folders/l2/71_2bdwd5hl5fnnvwg2sr4v80000gn/T//ccUkH8w1.s:269    .text.setPhase:00000000 setPhase
/var/folders/l2/71_2bdwd5hl5fnnvwg2sr4v80000gn/T//ccUkH8w1.s:383    .text.setPhase:000000bc $d
/var/folders/l2/71_2bdwd5hl5fnnvwg2sr4v80000gn/T//ccUkH8w1.s:1919   .bss.cos_table:00000000 cos_table
/var/folders/l2/71_2bdwd5hl5fnnvwg2sr4v80000gn/T//ccUkH8w1.s:392    .text.setVoltage:00000000 $t
/var/folders/l2/71_2bdwd5hl5fnnvwg2sr4v80000gn/T//ccUkH8w1.s:398    .text.setVoltage:00000000 setVoltage
/var/folders/l2/71_2bdwd5hl5fnnvwg2sr4v80000gn/T//ccUkH8w1.s:505    .text.setVoltage:0000008c $d
/var/folders/l2/71_2bdwd5hl5fnnvwg2sr4v80000gn/T//ccUkH8w1.s:513    .text.uint2char:00000000 $t
/var/folders/l2/71_2bdwd5hl5fnnvwg2sr4v80000gn/T//ccUkH8w1.s:519    .text.uint2char:00000000 uint2char
/var/folders/l2/71_2bdwd5hl5fnnvwg2sr4v80000gn/T//ccUkH8w1.s:584    .text.uint2char:0000005c $d
/var/folders/l2/71_2bdwd5hl5fnnvwg2sr4v80000gn/T//ccUkH8w1.s:1852   .bss.str.3:00000000 str.3
/var/folders/l2/71_2bdwd5hl5fnnvwg2sr4v80000gn/T//ccUkH8w1.s:597    .text.senseOut:00000000 $t
/var/folders/l2/71_2bdwd5hl5fnnvwg2sr4v80000gn/T//ccUkH8w1.s:603    .text.senseOut:00000000 senseOut
/var/folders/l2/71_2bdwd5hl5fnnvwg2sr4v80000gn/T//ccUkH8w1.s:824    .text.senseOut:00000168 $d
/var/folders/l2/71_2bdwd5hl5fnnvwg2sr4v80000gn/T//ccUkH8w1.s:1898   .bss.sense:00000000 sense
/var/folders/l2/71_2bdwd5hl5fnnvwg2sr4v80000gn/T//ccUkH8w1.s:1912   .bss.adcBuffer:00000000 adcBuffer
/var/folders/l2/71_2bdwd5hl5fnnvwg2sr4v80000gn/T//ccUkH8w1.s:846    .text.HAL_UART_TxCpltCallback:00000000 $t
/var/folders/l2/71_2bdwd5hl5fnnvwg2sr4v80000gn/T//ccUkH8w1.s:852    .text.HAL_UART_TxCpltCallback:00000000 HAL_UART_TxCpltCallback
/var/folders/l2/71_2bdwd5hl5fnnvwg2sr4v80000gn/T//ccUkH8w1.s:874    .text.__io_putchar:00000000 $t
/var/folders/l2/71_2bdwd5hl5fnnvwg2sr4v80000gn/T//ccUkH8w1.s:880    .text.__io_putchar:00000000 __io_putchar
/var/folders/l2/71_2bdwd5hl5fnnvwg2sr4v80000gn/T//ccUkH8w1.s:909    .text.__io_getchar:00000000 $t
/var/folders/l2/71_2bdwd5hl5fnnvwg2sr4v80000gn/T//ccUkH8w1.s:915    .text.__io_getchar:00000000 __io_getchar
/var/folders/l2/71_2bdwd5hl5fnnvwg2sr4v80000gn/T//ccUkH8w1.s:936    .text.HAL_TIM_PeriodElapsedCallback:00000000 $t
/var/folders/l2/71_2bdwd5hl5fnnvwg2sr4v80000gn/T//ccUkH8w1.s:942    .text.HAL_TIM_PeriodElapsedCallback:00000000 HAL_TIM_PeriodElapsedCallback
/var/folders/l2/71_2bdwd5hl5fnnvwg2sr4v80000gn/T//ccUkH8w1.s:1228   .text.HAL_TIM_PeriodElapsedCallback:00000168 $d
/var/folders/l2/71_2bdwd5hl5fnnvwg2sr4v80000gn/T//ccUkH8w1.s:1926   .bss.offset:00000000 offset
/var/folders/l2/71_2bdwd5hl5fnnvwg2sr4v80000gn/T//ccUkH8w1.s:1846   .bss.count.2:00000000 count.2
/var/folders/l2/71_2bdwd5hl5fnnvwg2sr4v80000gn/T//ccUkH8w1.s:1878   .bss.velocity_ref:00000000 velocity_ref
/var/folders/l2/71_2bdwd5hl5fnnvwg2sr4v80000gn/T//ccUkH8w1.s:1891   .bss.velocity:00000000 velocity
/var/folders/l2/71_2bdwd5hl5fnnvwg2sr4v80000gn/T//ccUkH8w1.s:1835   .bss.int_err_vel.0:00000000 int_err_vel.0
/var/folders/l2/71_2bdwd5hl5fnnvwg2sr4v80000gn/T//ccUkH8w1.s:1871   .bss.pwm:00000000 pwm
/var/folders/l2/71_2bdwd5hl5fnnvwg2sr4v80000gn/T//ccUkH8w1.s:1858   .data.isReleased:00000000 isReleased
/var/folders/l2/71_2bdwd5hl5fnnvwg2sr4v80000gn/T//ccUkH8w1.s:1841   .bss.old_real_angle.1:00000000 old_real_angle.1
/var/folders/l2/71_2bdwd5hl5fnnvwg2sr4v80000gn/T//ccUkH8w1.s:1245   .text.Error_Handler:00000000 $t
/var/folders/l2/71_2bdwd5hl5fnnvwg2sr4v80000gn/T//ccUkH8w1.s:1251   .text.Error_Handler:00000000 Error_Handler
/var/folders/l2/71_2bdwd5hl5fnnvwg2sr4v80000gn/T//ccUkH8w1.s:1283   .text.SystemClock_Config:00000000 $t
/var/folders/l2/71_2bdwd5hl5fnnvwg2sr4v80000gn/T//ccUkH8w1.s:1289   .text.SystemClock_Config:00000000 SystemClock_Config
/var/folders/l2/71_2bdwd5hl5fnnvwg2sr4v80000gn/T//ccUkH8w1.s:1421   .rodata.main.str1.4:00000000 $d
/var/folders/l2/71_2bdwd5hl5fnnvwg2sr4v80000gn/T//ccUkH8w1.s:1438   .text.main:00000000 $t
/var/folders/l2/71_2bdwd5hl5fnnvwg2sr4v80000gn/T//ccUkH8w1.s:1444   .text.main:00000000 main
/var/folders/l2/71_2bdwd5hl5fnnvwg2sr4v80000gn/T//ccUkH8w1.s:1801   .text.main:000001c8 $d
/var/folders/l2/71_2bdwd5hl5fnnvwg2sr4v80000gn/T//ccUkH8w1.s:1832   .bss.int_err_vel.0:00000000 $d
/var/folders/l2/71_2bdwd5hl5fnnvwg2sr4v80000gn/T//ccUkH8w1.s:1838   .bss.old_real_angle.1:00000000 $d
/var/folders/l2/71_2bdwd5hl5fnnvwg2sr4v80000gn/T//ccUkH8w1.s:1847   .bss.count.2:00000000 $d
/var/folders/l2/71_2bdwd5hl5fnnvwg2sr4v80000gn/T//ccUkH8w1.s:1849   .bss.str.3:00000000 $d
ARM GAS  /var/folders/l2/71_2bdwd5hl5fnnvwg2sr4v80000gn/T//ccUkH8w1.s 			page 51


/var/folders/l2/71_2bdwd5hl5fnnvwg2sr4v80000gn/T//ccUkH8w1.s:1864   .rodata.id:00000000 id
/var/folders/l2/71_2bdwd5hl5fnnvwg2sr4v80000gn/T//ccUkH8w1.s:1865   .rodata.id:00000000 $d
/var/folders/l2/71_2bdwd5hl5fnnvwg2sr4v80000gn/T//ccUkH8w1.s:1868   .bss.pwm:00000000 $d
/var/folders/l2/71_2bdwd5hl5fnnvwg2sr4v80000gn/T//ccUkH8w1.s:1875   .bss.velocity_ref:00000000 $d
/var/folders/l2/71_2bdwd5hl5fnnvwg2sr4v80000gn/T//ccUkH8w1.s:1884   .rodata.pre_scaler:00000000 pre_scaler
/var/folders/l2/71_2bdwd5hl5fnnvwg2sr4v80000gn/T//ccUkH8w1.s:1888   .bss.velocity:00000000 $d
/var/folders/l2/71_2bdwd5hl5fnnvwg2sr4v80000gn/T//ccUkH8w1.s:1895   .bss.sense:00000000 $d
/var/folders/l2/71_2bdwd5hl5fnnvwg2sr4v80000gn/T//ccUkH8w1.s:1905   .bss.adcOffset:00000000 adcOffset
/var/folders/l2/71_2bdwd5hl5fnnvwg2sr4v80000gn/T//ccUkH8w1.s:1902   .bss.adcOffset:00000000 $d
/var/folders/l2/71_2bdwd5hl5fnnvwg2sr4v80000gn/T//ccUkH8w1.s:1909   .bss.adcBuffer:00000000 $d
/var/folders/l2/71_2bdwd5hl5fnnvwg2sr4v80000gn/T//ccUkH8w1.s:1916   .bss.cos_table:00000000 $d
/var/folders/l2/71_2bdwd5hl5fnnvwg2sr4v80000gn/T//ccUkH8w1.s:1923   .bss.offset:00000000 $d

UNDEFINED SYMBOLS
HAL_GPIO_WritePin
HAL_SPI_Transmit
HAL_SPI_Receive
hspi1
htim1
htim16
htim3
__aeabi_i2d
__aeabi_dmul
__aeabi_dsub
__aeabi_d2f
__aeabi_dadd
dma_printf_send_it
dma_printf_putc
dma_scanf_getc_blocking
htim2
memset
HAL_RCC_OscConfig
HAL_RCC_ClockConfig
HAL_RCCEx_PeriphCLKConfig
__aeabi_ddiv
HAL_Init
MX_GPIO_Init
MX_DMA_Init
MX_TIM1_Init
MX_TIM16_Init
MX_TIM2_Init
MX_TIM3_Init
MX_SPI1_Init
MX_USART1_UART_Init
MX_ADC1_Init
setbuf
dma_printf_init
HAL_TIM_PWM_Start
HAL_TIMEx_PWMN_Start
HAL_ADCEx_Calibration_Start
HAL_ADC_Start_DMA
printf
cos
HAL_TIM_Base_Start_IT
HAL_UART_Receive_DMA
puts
_impure_ptr
ARM GAS  /var/folders/l2/71_2bdwd5hl5fnnvwg2sr4v80000gn/T//ccUkH8w1.s 			page 52


huart1
hadc1
